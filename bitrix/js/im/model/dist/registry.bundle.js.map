{"version":3,"file":"registry.bundle.js","sources":["../src/application.js","../src/messages.js","../src/dialogues.js","../src/users.js","../src/files.js"],"sourcesContent":["/**\n * Bitrix Messenger\n * Application model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nimport {DeviceType, DeviceOrientation} from 'im.const';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\n\nclass ApplicationModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'application';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcommon:\n\t\t\t{\n\t\t\t\thost: this.getVariable('common.host', location.protocol+'//'+location.host),\n\t\t\t\tsiteId: this.getVariable('common.siteId', 'default'),\n\t\t\t\tuserId: this.getVariable('common.userId', 0),\n\t\t\t\tlanguageId: this.getVariable('common.languageId', 'en'),\n\t\t\t},\n\t\t\tdialog:\n\t\t\t{\n\t\t\t\tdialogId: this.getVariable('dialog.dialogId', '0'),\n\t\t\t\tchatId: this.getVariable('dialog.chatId', 0),\n\t\t\t\tdiskFolderId: this.getVariable('dialog.diskFolderId', 0),\n\t\t\t\tmessageLimit: this.getVariable('dialog.messageLimit', 20),\n\t\t\t\tmessageExtraCount: 0,\n\t\t\t},\n\t\t\tdisk:\n\t\t\t{\n\t\t\t\tenabled: false,\n\t\t\t\tmaxFileSize: 5242880,\n\t\t\t},\n\t\t\tmobile:\n\t\t\t{\n\t\t\t\tkeyboardShow: false,\n\t\t\t},\n\t\t\tdevice:\n\t\t\t{\n\t\t\t\ttype: this.getVariable('device.type', DeviceType.desktop),\n\t\t\t\torientation: this.getVariable('device.orientation', DeviceOrientation.portrait),\n\t\t\t},\n\t\t\toptions:\n\t\t\t{\n\t\t\t\tautoplayVideo: this.getVariable('options.autoplayVideo', true),\n\t\t\t\tdarkBackground: this.getVariable('options.darkBackground', false),\n\t\t\t},\n\t\t\terror:\n\t\t\t{\n\t\t\t\tactive: false,\n\t\t\t\tcode: '',\n\t\t\t\tdescription: '',\n\t\t\t},\n\t\t}\n\t}\n\n\tgetStateSaveException()\n\t{\n\t\treturn Object.assign({\n\t\t\tcommon: this.getVariable('saveException.common', null),\n\t\t\tdialog: this.getVariable('saveException.dialog', null),\n\t\t\tmobile: this.getVariable('saveException.mobile', null),\n\t\t\tdevice: this.getVariable('saveException.device', null),\n\t\t\terror: this.getVariable('saveException.error', null)\n\t\t});\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('set', this.validate(payload));\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tset: (state, payload) =>\n\t\t\t{\n\t\t\t\tlet hasChange = false;\n\t\t\t\tfor (let group in payload)\n\t\t\t\t{\n\t\t\t\t\tif (!payload.hasOwnProperty(group))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (let field in payload[group])\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!payload[group].hasOwnProperty(field))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstate[group][field] = payload[group][field];\n\t\t\t\t\t\thasChange = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (hasChange && this.isSaveNeeded(payload))\n\t\t\t\t{\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tincreaseDialogExtraCount(state, payload = {})\n\t\t\t{\n\t\t\t\tlet {count = 1} = payload;\n\n\t\t\t\tstate.dialog.messageExtraCount += count;\n\t\t\t},\n\t\t\tdecreaseDialogExtraCount(state, payload = {})\n\t\t\t{\n\t\t\t\tlet {count = 1} = payload;\n\n\t\t\t\tlet newCounter = state.dialog.messageExtraCount - count;\n\t\t\t\tif (newCounter <= 0)\n\t\t\t\t{\n\t\t\t\t\tnewCounter = 0;\n\t\t\t\t}\n\n\t\t\t\tstate.dialog.messageExtraCount = newCounter;\n\t\t\t},\n\t\t\tclearDialogExtraCount(state)\n\t\t\t{\n\t\t\t\tstate.dialog.messageExtraCount = 0;\n\t\t\t}\n\t\t}\n\t}\n\n\tvalidate(fields)\n\t{\n\t\tconst result = {};\n\n\t\tif (typeof fields.common === 'object' && fields.common)\n\t\t{\n\t\t\tresult.common = {};\n\n\t\t\tif (typeof fields.common.userId === 'number')\n\t\t\t{\n\t\t\t\tresult.common.userId = fields.common.userId;\n\t\t\t}\n\n\t\t\tif (typeof fields.common.languageId === 'string')\n\t\t\t{\n\t\t\t\tresult.common.languageId = fields.common.languageId;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.dialog === 'object' && fields.dialog)\n\t\t{\n\t\t\tresult.dialog = {};\n\n\t\t\tif (typeof fields.dialog.dialogId === 'number')\n\t\t\t{\n\t\t\t\tresult.dialog.dialogId = fields.dialog.dialogId.toString();\n\t\t\t\tresult.dialog.chatId = 0;\n\t\t\t}\n\t\t\telse if (typeof fields.dialog.dialogId === 'string')\n\t\t\t{\n\t\t\t\tresult.dialog.dialogId = fields.dialog.dialogId;\n\n\t\t\t\tif (typeof fields.dialog.chatId !== 'number')\n\t\t\t\t{\n\t\t\t\t\tlet chatId = fields.dialog.dialogId;\n\t\t\t\t\tif (chatId.startsWith('chat'))\n\t\t\t\t\t{\n\t\t\t\t\t\tchatId = fields.dialog.dialogId.substr(4);\n\t\t\t\t\t}\n\n\t\t\t\t\tchatId = parseInt(chatId);\n\n\t\t\t\t\tresult.dialog.chatId = !isNaN(chatId)? chatId: 0;\n\t\t\t\t\tfields.dialog.chatId = result.dialog.chatId;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (typeof fields.dialog.chatId === 'number')\n\t\t\t{\n\t\t\t\tresult.dialog.chatId = fields.dialog.chatId;\n\t\t\t}\n\n\t\t\tif (typeof fields.dialog.diskFolderId === 'number')\n\t\t\t{\n\t\t\t\tresult.dialog.diskFolderId = fields.dialog.diskFolderId;\n\t\t\t}\n\n\t\t\tif (typeof fields.dialog.messageLimit === 'number')\n\t\t\t{\n\t\t\t\tresult.dialog.messageLimit = fields.dialog.messageLimit;\n\t\t\t}\n\n\t\t\tif (typeof fields.dialog.messageExtraCount === 'number')\n\t\t\t{\n\t\t\t\tresult.dialog.messageExtraCount = fields.dialog.messageExtraCount;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.disk === 'object' && fields.disk)\n\t\t{\n\t\t\tresult.disk = {};\n\n\t\t\tif (typeof fields.disk.enabled === 'boolean')\n\t\t\t{\n\t\t\t\tresult.disk.enabled = fields.disk.enabled;\n\t\t\t}\n\n\t\t\tif (typeof fields.disk.maxFileSize === 'number')\n\t\t\t{\n\t\t\t\tresult.disk.maxFileSize = fields.disk.maxFileSize;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.mobile === 'object' && fields.mobile)\n\t\t{\n\t\t\tresult.mobile = {};\n\n\t\t\tif (typeof fields.mobile.keyboardShow === 'boolean')\n\t\t\t{\n\t\t\t\tresult.mobile.keyboardShow = fields.mobile.keyboardShow;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.device === 'object' && fields.device)\n\t\t{\n\t\t\tresult.device = {};\n\n\t\t\tif (typeof fields.device.type === 'string' && typeof DeviceType[fields.device.type] !== 'undefined')\n\t\t\t{\n\t\t\t\tresult.device.type = fields.device.type;\n\t\t\t}\n\n\t\t\tif (typeof fields.device.orientation === 'string' && typeof DeviceOrientation[fields.device.orientation] !== 'undefined')\n\t\t\t{\n\t\t\t\tresult.device.orientation = fields.device.orientation;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.error === 'object' && fields.error)\n\t\t{\n\t\t\tif (typeof fields.error.active === 'boolean')\n\t\t\t{\n\t\t\t\tresult.error = {\n\t\t\t\t\tactive: fields.error.active,\n\t\t\t\t\tcode: fields.error.code.toString() || '',\n\t\t\t\t\tdescription: fields.error.description.toString() || '',\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nexport {ApplicationModel};","/**\n * Bitrix Messenger\n * Message model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\n\nimport {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {MutationType, StorageLimit} from 'im.const';\nimport {Utils} from \"im.utils\";\n\nconst IntersectionType = {\n\tempty: 'empty',\n\tequal: 'equal',\n\tnone: 'none',\n\tfound: 'found',\n\tfoundReverse: 'foundReverse',\n};\n\nclass MessagesModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'messages';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcreated: 0,\n\t\t\tcollection: {},\n\t\t\tmutationType: {},\n\t\t\tsaveMessageList: {},\n\t\t\tsaveFileList: {},\n\t\t\tsaveUserList: {},\n\t\t}\n\t}\n\n\tgetElementState()\n\t{\n\t\treturn {\n\t\t\ttemplateId: 0,\n\t\t\ttemplateType: 'message',\n\n\t\t\tid: 0,\n\t\t\tchatId: 0,\n\t\t\tauthorId: 0,\n\t\t\tdate: new Date(),\n\t\t\ttext: \"\",\n\t\t\ttextConverted: \"\",\n\t\t\tparams: {\n\t\t\t\tTYPE : 'default',\n\t\t\t\tCOMPONENT_ID : 'bx-messenger-message',\n\t\t\t},\n\n\t\t\tunread: false,\n\t\t\tsending: false,\n\t\t\terror: false,\n\t\t\tretry: false,\n\t\t\tblink: false,\n\t\t};\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\n\t\t\tgetMutationType: state => chatId =>\n\t\t\t{\n\t\t\t\tif (!state.mutationType[chatId])\n\t\t\t\t{\n\t\t\t\t\treturn {initialType: MutationType.none, appliedType: MutationType.none};\n\t\t\t\t}\n\n\t\t\t\treturn state.mutationType[chatId];\n\t\t\t},\n\t\t\tgetLastId: state => chatId =>\n\t\t\t{\n\t\t\t\tif (!state.collection[chatId] || state.collection[chatId].length <= 0)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tfor (let index = state.collection[chatId].length-1; index >= 0; index--)\n\t\t\t\t{\n\t\t\t\t\tlet element = state.collection[chatId][index];\n\t\t\t\t\tif (element.sending || element.id.toString().startsWith('temporary'))\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\treturn element.id;\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\tgetMessage: state => (chatId, messageId) =>\n\t\t\t{\n\t\t\t\tif (!state.collection[chatId] || state.collection[chatId].length <= 0)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tfor (let index = state.collection[chatId].length-1; index >= 0; index--)\n\t\t\t\t{\n\t\t\t\t\tif (state.collection[chatId][index].id === messageId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn state.collection[chatId][index];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\tget: state => chatId =>\n\t\t\t{\n\t\t\t\tif (!state.collection[chatId] || state.collection[chatId].length <= 0)\n\t\t\t\t{\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\n\t\t\t\treturn state.collection[chatId];\n\t\t\t},\n\t\t\tgetBlank: state => params =>\n\t\t\t{\n\t\t\t\treturn this.getElementState();\n\t\t\t},\n\t\t\tgetSaveFileList: state => params =>\n\t\t\t{\n\t\t\t\treturn state.saveFileList;\n\t\t\t},\n\t\t\tgetSaveUserList: state => params =>\n\t\t\t{\n\t\t\t\treturn state.saveUserList;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tadd: (store, payload) =>\n\t\t\t{\n\t\t\t\tlet result = this.validate(Object.assign({}, payload));\n\t\t\t\tresult.params = Object.assign({}, this.getElementState().params, result.params);\n\t\t\t\tresult.id = 'temporary' + (new Date).getTime() + store.state.created;\n\t\t\t\tresult.templateId = result.id;\n\t\t\t\tresult.unread = false;\n\n\t\t\t\tstore.commit('add', Object.assign({}, this.getElementState(), result));\n\n\t\t\t\tif (payload.sending !== false)\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch('actionStart', {\n\t\t\t\t\t\tid: result.id,\n\t\t\t\t\t\tchatId: result.chatId,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn result.id;\n\t\t\t},\n\t\t\tactionStart: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (/^\\d+$/.test(payload.id))\n\t\t\t\t{\n\t\t\t\t\tpayload.id = parseInt(payload.id);\n\t\t\t\t}\n\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tVue.nextTick(() => {\n\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\tid : payload.id ,\n\t\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\t\tfields : {sending: true}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tactionError: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (/^\\d+$/.test(payload.id))\n\t\t\t\t{\n\t\t\t\t\tpayload.id = parseInt(payload.id);\n\t\t\t\t}\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tVue.nextTick(() => {\n\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\tid : payload.id ,\n\t\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\t\tfields : {sending: false, error: true, retry: payload.retry !== false}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tactionFinish: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (/^\\d+$/.test(payload.id))\n\t\t\t\t{\n\t\t\t\t\tpayload.id = parseInt(payload.id);\n\t\t\t\t}\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tVue.nextTick(() => {\n\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\tid : payload.id ,\n\t\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\t\tfields : {sending: false, error: false, retry: false}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(message => this.prepareMessage(message));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = this.prepareMessage(payload);\n\t\t\t\t\t(payload = []).push(result);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', {\n\t\t\t\t\tinsertType : MutationType.set,\n\t\t\t\t\tdata : payload\n\t\t\t\t});\n\t\t\t},\n\t\t\tsetAfter: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(message => this.prepareMessage(message));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = this.prepareMessage(payload);\n\t\t\t\t\t(payload = []).push(result);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', {\n\t\t\t\t\tinsertType : MutationType.setAfter,\n\t\t\t\t\tdata : payload\n\t\t\t\t});\n\t\t\t},\n\t\t\tsetBefore: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(message => this.prepareMessage(message));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = this.prepareMessage(payload);\n\t\t\t\t\t(payload = []).push(result);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', {\n\t\t\t\t\tinsertType : MutationType.setBefore,\n\t\t\t\t\tdata : payload\n\t\t\t\t});\n\t\t\t},\n\t\t\tupdate: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (/^\\d+$/.test(payload.id))\n\t\t\t\t{\n\t\t\t\t\tpayload.id = parseInt(payload.id);\n\t\t\t\t}\n\t\t\t\tif (/^\\d+$/.test(payload.chatId))\n\t\t\t\t{\n\t\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('initCollection', {chatId: payload.chatId});\n\n\t\t\t\tlet index = store.state.collection[payload.chatId].findIndex(el => el.id === payload.id);\n\t\t\t\tif (index < 0)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tlet result = this.validate(Object.assign({}, payload.fields));\n\n\t\t\t\tif (result.params)\n\t\t\t\t{\n\t\t\t\t\tresult.params = Object.assign(\n\t\t\t\t\t\t{},\n\t\t\t\t\t\tthis.getElementState().params,\n\t\t\t\t\t\tstore.state.collection[payload.chatId][index].params,\n\t\t\t\t\t\tresult.params\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tid : payload.id,\n\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\tindex : index,\n\t\t\t\t\tfields : result\n\t\t\t\t});\n\n\t\t\t\tif (payload.fields.blink)\n\t\t\t\t{\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\t\tid : payload.id ,\n\t\t\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\t\t\tfields : {blink: false}\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 1000);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tdelete: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (!(payload.id instanceof Array))\n\t\t\t\t{\n\t\t\t\t\tpayload.id = [payload.id];\n\t\t\t\t}\n\n\t\t\t\tpayload.id = payload.id.map(id => {\n\t\t\t\t\tif (/^\\d+$/.test(id))\n\t\t\t\t\t{\n\t\t\t\t\t\tid = parseInt(id);\n\t\t\t\t\t}\n\t\t\t\t\treturn id;\n\t\t\t\t});\n\n\t\t\t\tstore.commit('delete', {\n\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\telements : payload.id,\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tclear: (store, payload) =>\n\t\t\t{\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tstore.commit('clear', {\n\t\t\t\t\tchatId : payload.chatId\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tapplyMutationType: (store, payload) =>\n\t\t\t{\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tstore.commit('applyMutationType', {\n\t\t\t\t\tchatId : payload.chatId\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\treadMessages: (store, payload) =>\n\t\t\t{\n\t\t\t\tpayload.readId = parseInt(payload.readId) || 0;\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tif (typeof store.state.collection[payload.chatId] === 'undefined')\n\t\t\t\t{\n\t\t\t\t\treturn {count: 0}\n\t\t\t\t}\n\n\t\t\t\tlet count = 0;\n\t\t\t\tfor (let index = store.state.collection[payload.chatId].length-1; index >= 0; index--)\n\t\t\t\t{\n\t\t\t\t\tlet element = store.state.collection[payload.chatId][index];\n\t\t\t\t\tif (!element.unread)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tif (payload.readId === 0 || element.id <= payload.readId)\n\t\t\t\t\t{\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tstore.commit('readMessages', {\n\t\t\t\t\tchatId: payload.chatId,\n\t\t\t\t\treadId: payload.readId,\n\t\t\t\t});\n\n\t\t\t\treturn {count};\n\t\t\t},\n\t\t\tunreadMessages: (store, payload) =>\n\t\t\t{\n\t\t\t\tpayload.unreadId = parseInt(payload.unreadId) || 0;\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tif (typeof store.state.collection[payload.chatId] === 'undefined' || !payload.unreadId)\n\t\t\t\t{\n\t\t\t\t\treturn {count: 0}\n\t\t\t\t}\n\n\t\t\t\tlet count = 0;\n\t\t\t\tfor (let index = store.state.collection[payload.chatId].length-1; index >= 0; index--)\n\t\t\t\t{\n\t\t\t\t\tlet element = store.state.collection[payload.chatId][index];\n\t\t\t\t\tif (element.unread)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tif (element.id >= payload.unreadId)\n\t\t\t\t\t{\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tstore.commit('unreadMessages', {\n\t\t\t\t\tchatId: payload.chatId,\n\t\t\t\t\tunreadId: payload.unreadId,\n\t\t\t\t});\n\n\t\t\t\treturn {count};\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tinitCollection: (state, payload) =>\n\t\t\t{\n\t\t\t\treturn this.initCollection(state, payload);\n\t\t\t},\n\t\t\tadd: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, {chatId: payload.chatId});\n\t\t\t\tthis.setMutationType(state, {chatId: payload.chatId, initialType: MutationType.add});\n\n\t\t\t\tstate.collection[payload.chatId].push(payload);\n\t\t\t\tstate.saveMessageList[payload.chatId].push(payload.id);\n\n\t\t\t\tstate.created += 1;\n\n\t\t\t\tthis.saveState(state, payload.chatId);\n\t\t\t},\n\t\t\tset: (state, payload) =>\n\t\t\t{\n\t\t\t\tlet chats = [];\n\t\t\t\tlet chatsSave = [];\n\t\t\t\tlet mutationType = {};\n\n\t\t\t\tmutationType.initialType = payload.insertType;\n\n\t\t\t\tif (payload.insertType === MutationType.set)\n\t\t\t\t{\n\t\t\t\t\tpayload.insertType = MutationType.setAfter;\n\n\t\t\t\t\tlet elements = {};\n\t\t\t\t\tpayload.data.forEach(element => {\n\t\t\t\t\t\tif (!elements[element.chatId])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\telements[element.chatId] = [];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telements[element.chatId].push(element.id);\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let chatId in elements)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!elements.hasOwnProperty(chatId))\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\tthis.initCollection(state, {chatId});\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tstate.saveMessageList[chatId].length > elements[chatId].length\n\t\t\t\t\t\t\t|| elements[chatId].length < StorageLimit.messages\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.collection[chatId] = state.collection[chatId].filter(element => elements[chatId].includes(element.id));\n\t\t\t\t\t\t\tstate.saveMessageList[chatId] = state.saveMessageList[chatId].filter(id => elements[chatId].includes(id));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet intersection = this.manageCacheBeforeSet(\n\t\t\t\t\t\t\t[...state.saveMessageList[chatId].reverse()],\n\t\t\t\t\t\t\telements[chatId]\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (intersection.type === IntersectionType.none)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (intersection.foundElements.length > 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tstate.collection[chatId] = state.collection[chatId].filter(element => !intersection.foundElements.includes(element.id));\n\t\t\t\t\t\t\t\tstate.saveMessageList[chatId] = state.saveMessageList[chatId].filter(id => !intersection.foundElements.includes(id));\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.removeIntersectionCacheElements = state.collection[chatId].map(element => element.id);\n\n\t\t\t\t\t\t\tclearTimeout(this.removeIntersectionCacheTimeout);\n\t\t\t\t\t\t\tthis.removeIntersectionCacheTimeout = setTimeout(() => {\n\t\t\t\t\t\t\t\tstate.collection[chatId] = state.collection[chatId].filter(element => !this.removeIntersectionCacheElements.includes(element.id));\n\t\t\t\t\t\t\t\tstate.saveMessageList[chatId] = state.saveMessageList[chatId].filter(id => !this.removeIntersectionCacheElements.includes(id));\n\t\t\t\t\t\t\t\tthis.removeIntersectionCacheElements = [];\n\t\t\t\t\t\t\t}, 600);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (intersection.type === IntersectionType.foundReverse)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpayload.insertType = MutationType.setBefore;\n\t\t\t\t\t\t\t\tpayload.data = payload.data.reverse();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (intersection.foundElements.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (intersection.type === IntersectionType.found && intersection.noneElements[0])\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmutationType.scrollStickToTop = false;\n\t\t\t\t\t\t\t\tmutationType.scrollMessageId = intersection.foundElements[intersection.foundElements.length-1];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmutationType.scrollStickToTop = false;\n\t\t\t\t\t\t\t\tmutationType.scrollMessageId = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (intersection.type === IntersectionType.none)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmutationType.scrollStickToTop = false;\n\t\t\t\t\t\t\tmutationType.scrollMessageId = payload.data[0].id;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tmutationType.appliedType = payload.insertType;\n\n\t\t\t\tfor (let element of payload.data)\n\t\t\t\t{\n\t\t\t\t\tthis.initCollection(state, {chatId: element.chatId});\n\n\t\t\t\t\tlet index = state.collection[element.chatId].findIndex(el => el.id === element.id);\n\t\t\t\t\tif (index > -1)\n\t\t\t\t\t{\n\t\t\t\t\t\tdelete element.templateId;\n\n\t\t\t\t\t\tstate.collection[element.chatId][index] = Object.assign(\n\t\t\t\t\t\t\tstate.collection[element.chatId][index],\n\t\t\t\t\t\t\telement\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\telse if (payload.insertType === MutationType.setBefore)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[element.chatId].unshift(element);\n\t\t\t\t\t}\n\t\t\t\t\telse if (payload.insertType === MutationType.setAfter)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[element.chatId].push(element);\n\t\t\t\t\t}\n\n\t\t\t\t\tchats.push(element.chatId);\n\n\t\t\t\t\tif (this.store.getters['dialogues/canSaveChat'] && this.store.getters['dialogues/canSaveChat'](element.chatId))\n\t\t\t\t\t{\n\t\t\t\t\t\tchatsSave.push(element.chatId);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tchats = [...new Set(chats)];\n\t\t\t\tchatsSave = [...new Set(chatsSave)];\n\n\t\t\t\t// check array for correct order of messages\n\t\t\t\tif (mutationType.initialType === MutationType.set)\n\t\t\t\t{\n\t\t\t\t\tchats.forEach(chatId =>\n\t\t\t\t\t{\n\t\t\t\t\t\tlet lastElementId = 0;\n\t\t\t\t\t\tlet needApplySort = false;\n\t\t\t\t\t\tfor (let i = 0; i < state.collection[chatId].length; i++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlet element = state.collection[chatId][i];\n\t\t\t\t\t\t\tif (element.id < lastElementId)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tneedApplySort = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlastElementId = element.id;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (needApplySort)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.collection[chatId].sort((a, b) => a.id - b.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tchats.forEach(chatId => {\n\t\t\t\t\tthis.setMutationType(state, {chatId: chatId, ...mutationType});\n\t\t\t\t});\n\n\t\t\t\tif (mutationType.initialType !== MutationType.setBefore)\n\t\t\t\t{\n\t\t\t\t\tchatsSave.forEach(chatId => {\n\t\t\t\t\t\tthis.saveState(state, chatId);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdate: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, {chatId: payload.chatId});\n\n\t\t\t\tlet index = -1;\n\t\t\t\tif (typeof payload.index !== 'undefined' && state.collection[payload.chatId][payload.index])\n\t\t\t\t{\n\t\t\t\t\tindex = payload.index;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tindex = state.collection[payload.chatId].findIndex(el => el.id === payload.id);\n\t\t\t\t}\n\n\t\t\t\tif (index >= 0)\n\t\t\t\t{\n\t\t\t\t\tlet isSaveState = (\n\t\t\t\t\t\tstate.saveMessageList[payload.chatId].includes(state.collection[payload.chatId][index].id)\n\t\t\t\t\t\t|| payload.fields.id && !payload.fields.id.toString().startsWith('temporary') && state.collection[payload.chatId][index].id.toString().startsWith('temporary')\n\t\t\t\t\t);\n\n\t\t\t\t\tdelete payload.fields.templateId;\n\n\t\t\t\t\tstate.collection[payload.chatId][index] = Object.assign(\n\t\t\t\t\t\tstate.collection[payload.chatId][index],\n\t\t\t\t\t\tpayload.fields\n\t\t\t\t\t);\n\n\t\t\t\t\tif (isSaveState)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.saveState(state, payload.chatId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelete: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, {chatId: payload.chatId});\n\t\t\t\tthis.setMutationType(state, {chatId: payload.chatId, initialType: MutationType.delete});\n\n\t\t\t\tstate.collection[payload.chatId] = state.collection[payload.chatId].filter(element => !payload.elements.includes(element.id));\n\n\t\t\t\tif (state.saveMessageList[payload.chatId].length > 0)\n\t\t\t\t{\n\t\t\t\t\tfor (let id of payload.elements)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (state.saveMessageList[payload.chatId].includes(id))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.saveState(state, payload.chatId);\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tclear: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, {chatId: payload.chatId});\n\t\t\t\tthis.setMutationType(state, {chatId: payload.chatId, initialType: 'clear'});\n\n\t\t\t\tstate.collection[payload.chatId] = [];\n\t\t\t\tstate.saveMessageList[payload.chatId] = [];\n\t\t\t},\n\t\t\tapplyMutationType: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof state.mutationType[payload.chatId] === 'undefined')\n\t\t\t\t{\n\t\t\t\t\tVue.set(state.mutationType, payload.chatId, {applied: false, initialType: MutationType.none, appliedType: MutationType.none, scrollStickToTop: 0, scrollMessageId: 0});\n\t\t\t\t}\n\n\t\t\t\tstate.mutationType[payload.chatId].applied = true;\n\t\t\t},\n\t\t\treadMessages: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, {chatId: payload.chatId});\n\n\t\t\t\tlet saveNeeded = false;\n\t\t\t\tfor (let index = state.collection[payload.chatId].length-1; index >= 0; index--)\n\t\t\t\t{\n\t\t\t\t\tlet element = state.collection[payload.chatId][index];\n\t\t\t\t\tif (!element.unread)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tif (payload.readId === 0 || element.id <= payload.readId)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[payload.chatId][index] = Object.assign(\n\t\t\t\t\t\t\tstate.collection[payload.chatId][index],\n\t\t\t\t\t\t\t{unread: false}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsaveNeeded = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (saveNeeded)\n\t\t\t\t{\n\t\t\t\t\tthis.saveState(state, payload.chatId);\n\t\t\t\t}\n\t\t\t},\n\t\t\tunreadMessages: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, {chatId: payload.chatId});\n\n\t\t\t\tlet saveNeeded = false;\n\t\t\t\tfor (let index = state.collection[payload.chatId].length-1; index >= 0; index--)\n\t\t\t\t{\n\t\t\t\t\tlet element = state.collection[payload.chatId][index];\n\t\t\t\t\tif (element.unread)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tif (element.id >= payload.unreadId)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[payload.chatId][index] = Object.assign(\n\t\t\t\t\t\t\tstate.collection[payload.chatId][index],\n\t\t\t\t\t\t\t{unread: true}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsaveNeeded = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (saveNeeded)\n\t\t\t\t{\n\t\t\t\t\tthis.saveState(state, payload.chatId);\n\t\t\t\t\tthis.updateSubordinateStates();\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n\n\tinitCollection(state, payload)\n\t{\n\t\tif (typeof payload.chatId === 'undefined')\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\n\t\t\ttypeof payload.chatId === 'undefined'\n\t\t\t|| typeof state.collection[payload.chatId] !== 'undefined'\n\t\t)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tVue.set(state.collection, payload.chatId, payload.messages? [].concat(payload.messages): []);\n\t\tVue.set(state.mutationType, payload.chatId, {applied: false, initialType: MutationType.none, appliedType: MutationType.none, scrollStickToTop: 0, scrollMessageId: 0});\n\t\tVue.set(state.saveMessageList, payload.chatId, []);\n\t\tVue.set(state.saveFileList, payload.chatId, []);\n\t\tVue.set(state.saveUserList, payload.chatId, []);\n\n\t\treturn true;\n\t}\n\n\tsetMutationType(state, payload)\n\t{\n\t\tlet mutationType = {\n\t\t\tapplied: false,\n\t\t\tinitialType: MutationType.none,\n\t\t\tappliedType: MutationType.none,\n\t\t\tscrollStickToTop: false,\n\t\t\tscrollMessageId: 0\n\t\t};\n\n\t\tif (payload.initialType && !payload.appliedType)\n\t\t{\n\t\t\tpayload.appliedType = payload.initialType;\n\t\t}\n\n\t\tif (typeof state.mutationType[payload.chatId] === 'undefined')\n\t\t{\n\t\t\tVue.set(state.mutationType, payload.chatId, mutationType);\n\t\t}\n\n\t\tstate.mutationType[payload.chatId] = {...mutationType, ...payload};\n\n\t\treturn true;\n\t}\n\n\tprepareMessage(message)\n\t{\n\t\tlet result = this.validate(Object.assign({}, message));\n\n\t\tresult.params = Object.assign({}, this.getElementState().params, result.params);\n\t\tresult.templateId = result.id;\n\n\t\treturn Object.assign({}, this.getElementState(), result);\n\t}\n\n\tmanageCacheBeforeSet(cache, elements, recursive = false)\n\t{\n\t\tlet result = {\n\t\t\ttype: IntersectionType.empty,\n\t\t\tfoundElements: [],\n\t\t\tnoneElements: []\n\t\t};\n\n\t\tif (!cache || cache.length <= 0)\n\t\t{\n\t\t\treturn result;\n\t\t}\n\n\t\tfor (let id of elements)\n\t\t{\n\t\t\tif (cache.includes(id))\n\t\t\t{\n\t\t\t\tif (result.type === IntersectionType.empty)\n\t\t\t\t{\n\t\t\t\t\tresult.type = IntersectionType.found;\n\t\t\t\t}\n\t\t\t\tresult.foundElements.push(id);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (result.type === IntersectionType.empty)\n\t\t\t\t{\n\t\t\t\t\tresult.type = IntersectionType.none;\n\t\t\t\t}\n\t\t\t\tresult.noneElements.push(id);\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\tresult.type === IntersectionType.found\n\t\t\t&& cache.length === elements.length\n\t\t\t&& result.foundElements.length === elements.length\n\t\t)\n\t\t{\n\t\t\tresult.type = IntersectionType.equal;\n\t\t}\n\t\telse if (\n\t\t\tresult.type === IntersectionType.none\n\t\t\t&& !recursive\n\t\t\t&& result.foundElements.length > 0\n\t\t)\n\t\t{\n\t\t\tlet reverseResult = this.manageCacheBeforeSet(cache.reverse(), elements.reverse(), true);\n\t\t\tif (reverseResult.type === IntersectionType.found)\n\t\t\t{\n\t\t\t\treverseResult.type = IntersectionType.foundReverse;\n\t\t\t\treturn reverseResult;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tupdateSaveLists(state, chatId)\n\t{\n\t\tif (!this.isSaveAvailable())\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tif (\n\t\t\t!chatId\n\t\t\t|| !this.store.getters['dialogues/canSaveChat']\n\t\t\t|| !this.store.getters['dialogues/canSaveChat'](chatId)\n\t\t)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.initCollection(state, {chatId: chatId});\n\n\t\tlet count = 0;\n\t\tlet saveMessageList = [];\n\t\tlet saveFileList = [];\n\t\tlet saveUserList = [];\n\n\t\tlet dialog = this.store.getters['dialogues/getByChatId'](chatId);\n\t\tif (dialog && dialog.type === 'private')\n\t\t{\n\t\t\tsaveUserList.push(parseInt(dialog.dialogId));\n\t\t}\n\n\t\tfor (let index = state.collection[chatId].length-1; index >= 0; index--)\n\t\t{\n\t\t\tif (state.collection[chatId][index].id.toString().startsWith('temporary'))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (count >= StorageLimit.messages && !state.collection[chatId][index].unread)\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tsaveMessageList.unshift(state.collection[chatId][index].id);\n\n\t\t\tcount++;\n\t\t}\n\n\t\tsaveMessageList = saveMessageList.slice(0, StorageLimit.messages);\n\n\t\tstate.collection[chatId].filter(element => saveMessageList.includes(element.id)).forEach(element =>\n\t\t{\n\t\t\tif (element.authorId > 0)\n\t\t\t{\n\t\t\t\tsaveUserList.push(element.authorId);\n\t\t\t}\n\n\t\t\tif (element.params.FILE_ID instanceof Array)\n\t\t\t{\n\t\t\t\tsaveFileList = element.params.FILE_ID.concat(saveFileList);\n\t\t\t}\n\t\t});\n\n\t\tstate.saveMessageList[chatId] = saveMessageList;\n\t\tstate.saveFileList[chatId] = [...new Set(saveFileList)];\n\t\tstate.saveUserList[chatId] = [...new Set(saveUserList)];\n\n\t\treturn true;\n\t}\n\n\tgetSaveTimeout()\n\t{\n\t\treturn 150;\n\t}\n\n\tsaveState(state, chatId)\n\t{\n\t\tif (!this.updateSaveLists(state, chatId))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tsuper.saveState(() =>\n\t\t{\n\t\t\tlet storedState = {\n\t\t\t\tcollection: {},\n\t\t\t\tsaveMessageList: {},\n\t\t\t\tsaveUserList: {},\n\t\t\t\tsaveFileList: {},\n\t\t\t};\n\n\t\t\tfor (let chatId in state.saveMessageList)\n\t\t\t{\n\t\t\t\tif (!state.saveMessageList.hasOwnProperty(chatId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (!state.collection[chatId])\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (!storedState.collection[chatId])\n\t\t\t\t{\n\t\t\t\t\tstoredState.collection[chatId] = [];\n\t\t\t\t}\n\n\t\t\t\tstate.collection[chatId]\n\t\t\t\t\t.filter(element => state.saveMessageList[chatId].includes(element.id))\n\t\t\t\t\t.forEach(element => storedState.collection[chatId].push(element))\n\t\t\t\t;\n\n\t\t\t\tstoredState.saveMessageList[chatId] = state.saveMessageList[chatId];\n\t\t\t\tstoredState.saveFileList[chatId] = state.saveFileList[chatId];\n\t\t\t\tstoredState.saveUserList[chatId] = state.saveUserList[chatId];\n\t\t\t}\n\n\t\t\treturn storedState;\n\t\t});\n\t}\n\n\tupdateSubordinateStates()\n\t{\n\t\tthis.store.dispatch('users/saveState');\n\t\tthis.store.dispatch('files/saveState');\n\t}\n\n\tvalidate(fields)\n\t{\n\t\tconst result = {};\n\n\t\tif (typeof fields.id === \"number\")\n\t\t{\n\t\t\tresult.id = fields.id;\n\t\t}\n\t\telse if (typeof fields.id === \"string\")\n\t\t{\n\t\t\tif (fields.id.startsWith('temporary'))\n\t\t\t{\n\t\t\t\tresult.id = fields.id;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.id = parseInt(fields.id);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.templateId === \"number\")\n\t\t{\n\t\t\tresult.templateId = fields.templateId;\n\t\t}\n\t\telse if (typeof fields.templateId === \"string\")\n\t\t{\n\t\t\tif (fields.templateId.startsWith('temporary'))\n\t\t\t{\n\t\t\t\tresult.templateId = fields.templateId;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.templateId = parseInt(fields.templateId);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.chat_id !== 'undefined')\n\t\t{\n\t\t\tfields.chatId = fields.chat_id;\n\t\t}\n\t\tif (typeof fields.chatId === \"number\" || typeof fields.chatId === \"string\")\n\t\t{\n\t\t\tresult.chatId = parseInt(fields.chatId);\n\t\t}\n\t\tif (typeof fields.date !== \"undefined\")\n\t\t{\n\t\t\tresult.date = Utils.date.cast(fields.date);\n\t\t}\n\n\t\t// previous P&P format\n\t\tif (typeof fields.textOriginal === \"string\" || typeof fields.textOriginal === \"number\")\n\t\t{\n\t\t\tresult.text = fields.textOriginal.toString();\n\n\t\t\tif (typeof fields.text === \"string\" || typeof fields.text === \"number\")\n\t\t\t{\n\t\t\t\tresult.textConverted = this.convertToHtml({\n\t\t\t\t\ttext: fields.text.toString(),\n\t\t\t\t\tisConverted: true\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse // modern format\n\t\t{\n\t\t\tif (typeof fields.text_converted !== 'undefined')\n\t\t\t{\n\t\t\t\tfields.textConverted = fields.text_converted;\n\t\t\t}\n\t\t\tif (typeof fields.textConverted === \"string\" || typeof fields.textConverted === \"number\")\n\t\t\t{\n\t\t\t\tresult.textConverted = fields.textConverted.toString();\n\t\t\t}\n\t\t\tif (typeof fields.text === \"string\" || typeof fields.text === \"number\")\n\t\t\t{\n\t\t\t\tresult.text = fields.text.toString();\n\n\t\t\t\tlet isConverted = typeof result.textConverted !== 'undefined';\n\n\t\t\t\tresult.textConverted = this.convertToHtml({\n\t\t\t\t\ttext: isConverted? result.textConverted: result.text,\n\t\t\t\t\tisConverted\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.senderId !== 'undefined')\n\t\t{\n\t\t\tfields.authorId = fields.senderId;\n\t\t}\n\t\telse if (typeof fields.author_id !== 'undefined')\n\t\t{\n\t\t\tfields.authorId = fields.author_id;\n\t\t}\n\t\tif (typeof fields.authorId === \"number\" || typeof fields.authorId === \"string\")\n\t\t{\n\t\t\tif (fields.system === true || fields.system === 'Y')\n\t\t\t{\n\t\t\t\tresult.authorId = 0;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.authorId = parseInt(fields.authorId);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.params === \"object\" && fields.params !== null)\n\t\t{\n\t\t\tconst params = this.validateParams(fields.params);\n\t\t\tif (params)\n\t\t\t{\n\t\t\t\tresult.params = params;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.sending === \"boolean\")\n\t\t{\n\t\t\tresult.sending = fields.sending;\n\t\t}\n\n\t\tif (typeof fields.unread === \"boolean\")\n\t\t{\n\t\t\tresult.unread = fields.unread;\n\t\t}\n\n\t\tif (typeof fields.blink === \"boolean\")\n\t\t{\n\t\t\tresult.blink = fields.blink;\n\t\t}\n\n\t\tif (typeof fields.error === \"boolean\" || typeof fields.error === \"string\")\n\t\t{\n\t\t\tresult.error = fields.error;\n\t\t}\n\n\t\tif (typeof fields.retry === \"boolean\")\n\t\t{\n\t\t\tresult.retry = fields.retry;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tvalidateParams(params)\n\t{\n\t\tconst result = {};\n\t\ttry\n\t\t{\n\t\t\tfor (let field in params)\n\t\t\t{\n\t\t\t\tif (!params.hasOwnProperty(field))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (field === 'COMPONENT_ID')\n\t\t\t\t{\n\t\t\t\t\tif (typeof params[field] === \"string\" && BX.Vue.isComponent(params[field]))\n\t\t\t\t\t{\n\t\t\t\t\t\tresult[field] = params[field];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (field === 'LIKE')\n\t\t\t\t{\n\t\t\t\t\tif (params[field] instanceof Array)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult['REACTION'] = {like: params[field].map(element => parseInt(element))};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult[field] = params[field];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (e) {}\n\n\t\tlet hasResultElements = false;\n\t\tfor (let field in result)\n\t\t{\n\t\t\tif (!result.hasOwnProperty(field))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\thasResultElements = true;\n\t\t\tbreak\n\t\t}\n\n\t\treturn hasResultElements? result: null;\n\t}\n\n\tconvertToHtml(params = {})\n\t{\n\t\tlet {\n\t\t\tquote = true,\n\t\t\timage = true,\n\t\t\ttext = '',\n\t\t\thighlightText = '',\n\t\t\tisConverted = false,\n\t\t\tenableBigSmile = true\n\t\t} = params;\n\n\t\ttext = text.trim();\n\n\t\tif (!isConverted)\n\t\t{\n\t\t\ttext = text.replace(/&/g, '&amp;').replace(/\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n\t\t}\n\n\t\tif (text.startsWith('/me'))\n\t\t{\n\t\t\ttext = `<i>${text.substr(4)}</i>`;\n\t\t}\n\t\telse if (text.startsWith('/loud'))\n\t\t{\n\t\t\ttext = `<b>${text.substr(6)}</b>`;\n\t\t}\n\n\t\tconst quoteSign = \"&gt;&gt;\";\n\t\tif (quote && text.indexOf(quoteSign) >= 0)\n\t\t{\n\t\t\tlet textPrepareFlag = false;\n\t\t\tlet textPrepare = text.split(isConverted? \"<br />\": \"\\n\");\n\t\t\tfor (let i = 0; i < textPrepare.length; i++)\n\t\t\t{\n\t\t\t\tif (textPrepare[i].startsWith(quoteSign))\n\t\t\t\t{\n\t\t\t\t\ttextPrepare[i] = textPrepare[i].replace(quoteSign, '<div class=\"bx-im-message-content-quote\"><div class=\"bx-im-message-content-quote-wrap\">');\n\t\t\t\t\twhile (++i < textPrepare.length && textPrepare[i].startsWith(quoteSign))\n\t\t\t\t\t{\n\t\t\t\t\t\ttextPrepare[i] = textPrepare[i].replace(quoteSign, '');\n\t\t\t\t\t}\n\t\t\t\t\ttextPrepare[i - 1] += '</div></div><br>';\n\t\t\t\t\ttextPrepareFlag = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttext = textPrepare.join(\"<br />\");\n\t\t}\n\n\t\ttext = text.replace(/\\n/gi, '<br />');\n\n\t\ttext = text.replace(/\\t/gi, '&nbsp;&nbsp;&nbsp;&nbsp;');\n\n\t\ttext = this.decodeBbCode(text, false, enableBigSmile);\n\n\t\tif (quote)\n\t\t{\n\t\t\ttext = text.replace(/------------------------------------------------------<br \\/>(.*?)\\[(.*?)\\]<br \\/>(.*?)------------------------------------------------------(<br \\/>)?/g, function (whole, p1, p2, p3, p4, offset) {\n\t\t\t\treturn (offset > 0? '<br>': '') + \"<div class=\\\"bx-im-message-content-quote\\\"><div class=\\\"bx-im-message-content-quote-wrap\\\"><div class=\\\"bx-im-message-content-quote-name\\\"><span class=\\\"bx-im-message-content-quote-name-text\\\">\" + p1 + \"</span><span class=\\\"bx-im-message-content-quote-name-time\\\">\" + p2 + \"</span></div>\" + p3 + \"</div></div><br />\";\n\t\t\t});\n\t\t\ttext = text.replace(/------------------------------------------------------<br \\/>(.*?)------------------------------------------------------(<br \\/>)?/g, function (whole, p1, p2, p3, offset) {\n\t\t\t\treturn (offset > 0? '<br>': '') + \"<div class=\\\"bx-im-message-content-quote\\\"><div class=\\\"bx-im-message-content-quote-wrap\\\">\" + p1 + \"</div></div><br />\";\n\t\t\t});\n\t\t}\n\n\t\tif (image)\n\t\t{\n\t\t\tlet changed = false;\n\t\t\ttext = text.replace(/<a(.*?)>(http[s]{0,1}:\\/\\/.*?)<\\/a>/ig, function(whole, aInner, text, offset)\n\t\t\t{\n\t\t\t\tif(!text.match(/(\\.(jpg|jpeg|png|gif)\\?|\\.(jpg|jpeg|png|gif)$)/i) || text.indexOf(\"/docs/pub/\") > 0 || text.indexOf(\"logout=yes\") > 0)\n\t\t\t\t{\n\t\t\t\t\treturn whole;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tchanged = true;\n\t\t\t\t\treturn (offset > 0? '<br />':'')+'<a' +aInner+ ' target=\"_blank\" class=\"bx-im-element-file-image\"><img src=\"'+text+'\" class=\"bx-im-element-file-image-source-text\" onerror=\"BX.Messenger.Model.MessagesModel.hideErrorImage(this)\"></a></span>';\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (changed)\n\t\t\t{\n\t\t\t\ttext = text.replace(/<\\/span>(\\n?)<br(\\s\\/?)>/ig, '</span>').replace(/<br(\\s\\/?)>(\\n?)<br(\\s\\/?)>(\\n?)<span/ig, '<br /><span');\n\t\t\t}\n\t\t}\n\n\t\tif (highlightText)\n\t\t{\n\t\t\ttext = text.replace(new RegExp(\"(\" + highlightText.replace(/[\\-\\[\\]\\/{}()*+?.\\\\^$|]/g, \"\\\\$&\") + \")\", 'ig'), '<span class=\"bx-messenger-highlight\">$1</span>');\n\t\t}\n\n\t\tif (enableBigSmile)\n\t\t{\n\t\t\ttext = text.replace(\n\t\t\t\t/^(\\s*<img\\s+src=[^>]+?data-code=[^>]+?data-definition=\"UHD\"[^>]+?style=\"width:)(\\d+)(px[^>]+?height:)(\\d+)(px[^>]+?class=\"bx-smile\"\\s*\\/?>\\s*)$/,\n\t\t\t\tfunction doubleSmileSize(match, start, width, middle, height, end) {\n\t\t\t\t\treturn start + (parseInt(width, 10) * 1.7) + middle + (parseInt(height, 10) * 1.7) + end;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (text.substr(-6) == '<br />')\n\t\t{\n\t\t\ttext = text.substr(0, text.length - 6);\n\t\t}\n\t\ttext = text.replace(/<br><br \\/>/ig, '<br />');\n\t\ttext = text.replace(/<br \\/><br>/ig, '<br />');\n\n\t\treturn text;\n\t};\n\n\tdecodeBbCode(text, textOnly = false, enableBigSmile = true)\n\t{\n\t\treturn MessagesModel.decodeBbCode({text, textOnly, enableBigSmile})\n\t}\n\n\tstatic decodeBbCode(params = {})\n\t{\n\t\tlet {text, textOnly = false, enableBigSmile = true} = params;\n\n\t\tlet codeReplacement = [];\n\n\t\ttext = text.replace(/\\[CODE\\]\\n?(.*?)\\[\\/CODE\\]/sig, function(whole, text)\n\t\t{\n\t\t\tlet id = codeReplacement.length;\n\t\t\tcodeReplacement.push(text);\n\t\t\treturn '####REPLACEMENT_MARK_'+id+'####';\n\t\t});\n\n\t\ttext = text.replace(/\\[LIKE\\]/ig, '<span class=\"bx-smile bx-im-smile-like\"></span>');\n\t\ttext = text.replace(/\\[DISLIKE\\]/ig, '<span class=\"bx-smile bx-im-smile-dislike\"></span>');\n\n\t\ttext = text.replace(/\\[USER=([0-9]{1,})\\](.*?)\\[\\/USER\\]/ig, (whole, userId, text) => '<span class=\"bx-im-mention\" data-type=\"USER\" data-value=\"'+userId+'\">'+text+'</span>');\n\n\t\ttext = text.replace(/\\[CHAT=(imol\\|)?([0-9]{1,})\\](.*?)\\[\\/CHAT\\]/ig, (whole, openlines, chatId, text) => openlines? text: '<span class=\"bx-im-mention\" data-type=\"CHAT\" data-value=\"chat'+chatId+'\">'+text+'</span>'); // TODO tag CHAT\n\n\t\ttext = text.replace(/\\[CALL(?:=(.+?))?\\](.+?)?\\[\\/CALL\\]/ig, (whole, number, text) => '<span class=\"bx-im-mention\" data-type=\"CALL\" data-value=\"'+Utils.text.htmlspecialchars(number)+'\">'+text+'</span>'); // TODO tag CHAT\n\n\t\ttext = text.replace(/\\[PCH=([0-9]{1,})\\](.*?)\\[\\/PCH\\]/ig, (whole, historyId, text) => text); // TODO tag PCH\n\n\t\ttext = text.replace(/\\[SEND(?:=(.+?))?\\](.+?)?\\[\\/SEND\\]/ig, (whole, command, text) =>\n\t\t{\n\t\t\tlet html = '';\n\n\t\t\ttext = text? text: command;\n\t\t\tcommand = (command? command: text).replace('<br />', '\\n');\n\n\t\t\tif (!textOnly && text)\n\t\t\t{\n\t\t\t\ttext = text.replace(/<([\\w]+)[^>]*>(.*?)<\\\\1>/i, \"$2\", text);\n\t\t\t\ttext = text.replace(/\\[([\\w]+)[^\\]]*\\](.*?)\\[\\/\\1\\]/i, \"$2\", text);\n\n\t\t\t\thtml = '<span class=\"bx-im-message-command-wrap\">'+\n\t\t\t\t\t'<span class=\"bx-im-message-command\" data-entity=\"send\">'+text+'</span>'+\n\t\t\t\t\t'<span class=\"bx-im-message-command-data\">'+command+'</span>'+\n\t\t\t\t'</span>';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\thtml = text;\n\t\t\t}\n\n\t\t\treturn html;\n\t\t});\n\n\t\ttext = text.replace(/\\[PUT(?:=(.+?))?\\](.+?)?\\[\\/PUT\\]/ig, (whole, command, text) =>\n\t\t{\n\t\t\tlet html = '';\n\n\t\t\ttext = text? text: command;\n\t\t\tcommand = (command? command: text).replace('<br />', '\\n');\n\n\t\t\tif (!textOnly && text)\n\t\t\t{\n\t\t\t\ttext = text.replace(/<([\\w]+)[^>]*>(.*?)<\\/\\1>/i, \"$2\", text);\n\t\t\t\ttext = text.replace(/\\[([\\w]+)[^\\]]*\\](.*?)\\[\\/\\1\\]/i, \"$2\", text);\n\n\t\t\t\thtml = '<span class=\"bx-im-message-command\" data-entity=\"put\">'+text+'</span>';\n\t\t\t\thtml += '<span class=\"bx-im-message-command-data\">'+command+'</span>';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\thtml = text;\n\t\t\t}\n\n\t\t\treturn html;\n\t\t});\n\n\t\tlet textElementSize = 0;\n\t\tif (enableBigSmile)\n\t\t{\n\t\t\ttextElementSize = text.replace(/\\[icon\\=([^\\]]*)\\]/ig, '').trim().length;\n\t\t}\n\n\t\ttext = text.replace(/\\[icon\\=([^\\]]*)\\]/ig, (whole) =>\n\t\t{\n\t\t\tlet url = whole.match(/icon\\=(\\S+[^\\s.,> )\\];\\'\\\"!?])/i);\n\t\t\tif (url && url[1])\n\t\t\t{\n\t\t\t\turl = url[1];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tlet attrs = {'src': url, 'border': 0};\n\n\t\t\tlet size = whole.match(/size\\=(\\d+)/i);\n\t\t\tif (size && size[1])\n\t\t\t{\n\t\t\t\tattrs['width'] = size[1];\n\t\t\t\tattrs['height'] = size[1];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet width = whole.match(/width\\=(\\d+)/i);\n\t\t\t\tif (width && width[1])\n\t\t\t\t{\n\t\t\t\t\tattrs['width'] = width[1];\n\t\t\t\t}\n\n\t\t\t\tlet height = whole.match(/height\\=(\\d+)/i);\n\t\t\t\tif (height && height[1])\n\t\t\t\t{\n\t\t\t\t\tattrs['height'] = height[1];\n\t\t\t\t}\n\n\t\t\t\tif (attrs['width'] && !attrs['height'])\n\t\t\t\t{\n\t\t\t\t\tattrs['height'] = attrs['width'];\n\t\t\t\t}\n\t\t\t\telse if (attrs['height'] && !attrs['width'])\n\t\t\t\t{\n\t\t\t\t\tattrs['width'] = attrs['height'];\n\t\t\t\t}\n\t\t\t\telse if (attrs['height'] && attrs['width'])\n\t\t\t\t{}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tattrs['width'] = 20;\n\t\t\t\t\tattrs['height'] = 20;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tattrs['width'] = attrs['width']>100? 100: attrs['width'];\n\t\t\tattrs['height'] = attrs['height']>100? 100: attrs['height'];\n\n\t\t\tif (enableBigSmile && textElementSize === 0 && attrs['width'] === attrs['height'] && attrs['width'] === 20)\n\t\t\t{\n\t\t\t\tattrs['width'] = 40;\n\t\t\t\tattrs['height'] = 40;\n\t\t\t}\n\n\t\t\tlet title = whole.match(/title\\=(.*[^\\s\\]])/i);\n\t\t\tif (title && title[1])\n\t\t\t{\n\t\t\t\ttitle = title[1];\n\t\t\t\tif (title.indexOf('width=') > -1)\n\t\t\t\t{\n\t\t\t\t\ttitle = title.substr(0, title.indexOf('width='))\n\t\t\t\t}\n\t\t\t\tif (title.indexOf('height=') > -1)\n\t\t\t\t{\n\t\t\t\t\ttitle = title.substr(0, title.indexOf('height='))\n\t\t\t\t}\n\t\t\t\tif (title.indexOf('size=') > -1)\n\t\t\t\t{\n\t\t\t\t\ttitle = title.substr(0, title.indexOf('size='))\n\t\t\t\t}\n\t\t\t\tif (title)\n\t\t\t\t{\n\t\t\t\t\tattrs['title'] = Utils.text.htmlspecialchars(title).trim();\n\t\t\t\t\tattrs['alt'] = attrs['title'];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet attributes = '';\n\t\t\tfor (let name in attrs)\n\t\t\t{\n\t\t\t\tif (attrs.hasOwnProperty(name))\n\t\t\t\t{\n\t\t\t\t\tattributes += name+'=\"'+attrs[name]+'\" ';\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\treturn '<img class=\"bx-smile bx-icon\" '+attributes+'>';\n\t\t});\n\n\t\tcodeReplacement.forEach((code, index) => {\n\t\t\ttext = text.replace('####REPLACEMENT_MARK_'+index+'####',\n\t\t\t\t!textOnly? '<div class=\"bx-im-message-content-code\">'+code+'</div>': code\n\t\t\t)\n\t\t});\n\n\t\treturn text;\n\t}\n\n\tstatic hideErrorImage(element)\n\t{\n\t\tif (element.parentNode && element.parentNode)\n\t\t{\n\t\t\telement.parentNode.innerHTML = '<a href=\"'+element.src+'\" target=\"_blank\">'+element.src+'</a>';\n\t\t}\n\t\treturn true;\n\t};\n}\n\nexport {MessagesModel};","\n/**\n * Bitrix Messenger\n * Dialogues model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nimport {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {StorageLimit} from \"im.const\";\nimport {Utils} from \"im.utils\";\n\nclass DialoguesModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'dialogues';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\thost: this.getVariable('host', location.protocol+'//'+location.host),\n\t\t\tcollection: {},\n\t\t\tsaveDialogList: [],\n\t\t\tsaveChatList: [],\n\t\t}\n\t}\n\n\tgetStateSaveException()\n\t{\n\t\treturn {\n\t\t\thost: null\n\t\t}\n\t}\n\n\tgetElementStateSaveException()\n\t{\n\t\treturn {\n\t\t\twritingList: null,\n\t\t\tquoteId: null\n\t\t}\n\t}\n\n\tgetElementState()\n\t{\n\t\treturn {\n\t\t\tdialogId: '0',\n\t\t\tchatId: 0,\n\t\t\tcounter: 0,\n\t\t\tunreadId: 0,\n\t\t\tunreadLastId: 0,\n\t\t\tmanagerList: [],\n\t\t\treadedList: [],\n\t\t\twritingList: [],\n\t\t\ttextareaMessage: \"\",\n\t\t\tquoteId: 0,\n\t\t\tinit: false,\n\n\t\t\tname: \"\",\n\t\t\towner: 0,\n\t\t\textranet: false,\n\t\t\tavatar: \"\",\n\t\t\tcolor: \"#17A3EA\",\n\t\t\ttype: \"chat\",\n\t\t\tentityType: \"\",\n\t\t\tentityId: \"\",\n\t\t\tentityData1: \"\",\n\t\t\tentityData2: \"\",\n\t\t\tentityData3: \"\",\n\t\t\tdateCreate: new Date(),\n\t\t};\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tget: state => dialogId =>\n\t\t\t{\n\t\t\t\tif (!state.collection[dialogId])\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn state.collection[dialogId];\n\t\t\t},\n\t\t\tgetByChatId: state => chatId =>\n\t\t\t{\n\t\t\t\tchatId = parseInt(chatId);\n\n\t\t\t\tfor (let dialogId in state.collection)\n\t\t\t\t{\n\t\t\t\t\tif (!state.collection.hasOwnProperty(dialogId))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (state.collection[dialogId].chatId === chatId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn state.collection[dialogId];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\tgetBlank: state => params =>\n\t\t\t{\n\t\t\t\treturn this.getElementState();\n\t\t\t},\n\t\t\tgetQuoteId: state => dialogId =>\n\t\t\t{\n\t\t\t\tif (!state.collection[dialogId])\n\t\t\t\t{\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\treturn state.collection[dialogId].quoteId;\n\t\t\t},\n\t\t\tcanSaveChat: state => chatId =>\n\t\t\t{\n\t\t\t\tif (/^\\d+$/.test(chatId))\n\t\t\t\t{\n\t\t\t\t\tchatId = parseInt(chatId);\n\t\t\t\t}\n\t\t\t\treturn state.saveChatList.includes(parseInt(chatId));\n\t\t\t},\n\t\t\tcanSaveDialog: state => dialogId =>\n\t\t\t{\n\t\t\t\treturn state.saveDialogList.includes(dialogId.toString());\n\t\t\t},\n\t\t\tisPrivateDialog: state => dialogId =>\n\t\t\t{\n\t\t\t\tdialogId = dialogId.toString();\n\t\t\t\treturn state.collection[dialogId.toString()] && state.collection[dialogId].type === 'private';\n\t\t\t},\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(dialog => {\n\t\t\t\t\t\treturn Object.assign(\n\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\tthis.validate(Object.assign({}, dialog), {host: store.state.host}),\n\t\t\t\t\t\t\t{init: true}\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = [];\n\t\t\t\t\tresult.push(Object.assign(\n\t\t\t\t\t\t{},\n\t\t\t\t\t\tthis.validate(Object.assign({}, payload), {host: store.state.host}),\n\t\t\t\t\t\t{init: true}\n\t\t\t\t\t));\n\t\t\t\t\tpayload = result;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', payload);\n\t\t\t},\n\n\t\t\tupdate: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\tfields : this.validate(Object.assign({}, payload.fields), {host: store.state.host})\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tdelete: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('delete', payload.dialogId);\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tupdateWriting: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet index = store.state.collection[payload.dialogId].writingList.findIndex(el => el.userId === payload.userId);\n\t\t\t\tif (payload.action)\n\t\t\t\t{\n\t\t\t\t\tif (index >= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tlet writingList = [].concat(store.state.collection[payload.dialogId].writingList);\n\t\t\t\t\t\twritingList.unshift({\n\t\t\t\t\t\t\tuserId: payload.userId,\n\t\t\t\t\t\t\tuserName: payload.userName,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\t\tactionName: 'updateWriting/1',\n\t\t\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\t\t\tfields : this.validate({writingList}, {host: store.state.host})\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (index >= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet writingList = store.state.collection[payload.dialogId].writingList.filter(el => el.userId !== payload.userId);\n\t\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\t\tactionName: 'updateWriting/2',\n\t\t\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\t\t\tfields : this.validate({writingList}, {host: store.state.host})\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tupdateReaded: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet readedList = store.state.collection[payload.dialogId].readedList.filter(el => el.userId !== payload.userId);\n\n\t\t\t\tif (payload.action)\n\t\t\t\t{\n\t\t\t\t\treadedList.push({\n\t\t\t\t\t\tuserId: payload.userId,\n\t\t\t\t\t\tuserName: payload.userName || '',\n\t\t\t\t\t\tmessageId: payload.messageId,\n\t\t\t\t\t\tdate: payload.date || (new Date()),\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tactionName: 'updateReaded',\n\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\tfields : this.validate({readedList}, {host: store.state.host})\n\t\t\t\t});\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tincreaseCounter: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet counter = store.state.collection[payload.dialogId].counter;\n\t\t\t\tif (counter === 100)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet increasedCounter = counter + payload.count;\n\t\t\t\tif (increasedCounter > 100)\n\t\t\t\t{\n\t\t\t\t\tincreasedCounter = 100;\n\t\t\t\t}\n\n\t\t\t\tlet fields = {\n\t\t\t\t\tcounter: increasedCounter\n\t\t\t\t};\n\n\t\t\t\tif (typeof payload.unreadLastId !== 'undefined')\n\t\t\t\t{\n\t\t\t\t\tfields.unreadLastId = payload.unreadLastId;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tactionName: 'increaseCounter',\n\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\tfields\n\t\t\t\t});\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tdecreaseCounter: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet counter = store.state.collection[payload.dialogId].counter;\n\t\t\t\tif (counter === 100)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet decreasedCounter = counter - payload.count;\n\t\t\t\tif (decreasedCounter < 0)\n\t\t\t\t{\n\t\t\t\t\tdecreasedCounter = 0;\n\t\t\t\t}\n\n\t\t\t\tlet unreadId = payload.unreadId > store.state.collection[payload.dialogId].unreadId? payload.unreadId: store.state.collection[payload.dialogId].unreadId;\n\n\t\t\t\tif (\n\t\t\t\t\tstore.state.collection[payload.dialogId].unreadId !== unreadId\n\t\t\t\t\t|| store.state.collection[payload.dialogId].counter !== decreasedCounter\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tif (decreasedCounter === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tunreadId = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\tactionName: 'decreaseCounter',\n\t\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\t\tfields : {\n\t\t\t\t\t\t\tcounter: decreasedCounter,\n\t\t\t\t\t\t\tunreadId: unreadId\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tsaveDialog: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('saveDialog', {\n\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\tchatId : payload.chatId\n\t\t\t\t});\n\n\t\t\t\treturn false;\n\t\t\t},\n\t\t};\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tinitCollection: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\t\t\t},\n\t\t\tsaveDialog: (state, payload) =>\n\t\t\t{\n\t\t\t\t// TODO if payload.dialogId is IMOL, skip update this flag\n\t\t\t\tif (!(payload.chatId > 0 && payload.dialogId.length > 0))\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tlet saveDialogList = state.saveDialogList.filter(function(element) {\n\t\t\t\t\treturn element !== payload.dialogId;\n\t\t\t\t});\n\n\t\t\t\tsaveDialogList.unshift(payload.dialogId);\n\n\t\t\t\tsaveDialogList = saveDialogList.slice(0, StorageLimit.dialogues);\n\n\t\t\t\tif (state.saveDialogList.join(',') === saveDialogList.join(','))\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tstate.saveDialogList = saveDialogList;\n\n\n\t\t\t\tlet saveChatList = state.saveChatList.filter(function(element) {\n\t\t\t\t\treturn element !== payload.chatId;\n\t\t\t\t});\n\n\t\t\t\tsaveChatList.unshift(payload.chatId);\n\n\t\t\t\tstate.saveChatList = saveChatList.slice(0, StorageLimit.dialogues);\n\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tset: (state, payload) =>\n\t\t\t{\n\t\t\t\tfor (let element of payload)\n\t\t\t\t{\n\t\t\t\t\tthis.initCollection(state, {dialogId: element.dialogId});\n\n\t\t\t\t\tstate.collection[element.dialogId] = Object.assign(\n\t\t\t\t\t\tthis.getElementState(),\n\t\t\t\t\t\tstate.collection[element.dialogId],\n\t\t\t\t\t\telement\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// TODO if payload.dialogId is IMOL, skip update cache\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tupdate: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\n\t\t\t\tstate.collection[payload.dialogId] = Object.assign(\n\t\t\t\t\tstate.collection[payload.dialogId],\n\t\t\t\t\tpayload.fields\n\t\t\t\t);\n\n\t\t\t\t// TODO if payload.dialogId is IMOL, skip update cache\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tdelete: (state, payload) =>\n\t\t\t{\n\t\t\t\tdelete state.collection[payload.dialogId];\n\n\t\t\t\t// TODO if payload.dialogId is IMOL, skip update cache\n\t\t\t\tthis.saveState(state);\n\t\t\t}\n\t\t};\n\t}\n\n\tinitCollection(state, payload)\n\t{\n\t\tif (typeof state.collection[payload.dialogId] !== 'undefined')\n\t\t{\n\t\t\treturn true\n\t\t}\n\n\t\tVue.set(state.collection, payload.dialogId, this.getElementState());\n\n\t\tif (payload.fields)\n\t\t{\n\t\t\tstate.collection[payload.dialogId] = Object.assign(\n\t\t\t\tstate.collection[payload.dialogId],\n\t\t\t\tthis.validate(Object.assign({}, payload.fields), {host: state.host})\n\t\t\t);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tgetSaveTimeout()\n\t{\n\t\treturn 100;\n\t}\n\n\tsaveState(state = {})\n\t{\n\t\tif (!this.isSaveAvailable())\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tsuper.saveState(() =>\n\t\t{\n\t\t\tlet storedState = {\n\t\t\t\tcollection: {},\n\t\t\t\tsaveDialogList: [].concat(state.saveDialogList),\n\t\t\t\tsaveChatList: [].concat(state.saveChatList),\n\t\t\t};\n\n\t\t\tstate.saveDialogList.forEach(dialogId => {\n\t\t\t\tif (!state.collection[dialogId])\n\t\t\t\t\treturn false;\n\n\t\t\t\tstoredState.collection[dialogId] = Object.assign(\n\t\t\t\t\tthis.getElementState(),\n\t\t\t\t\tthis.cloneState(state.collection[dialogId], this.getElementStateSaveException())\n\t\t\t\t);\n\t\t\t});\n\n\t\t\treturn storedState;\n\t\t});\n\t}\n\n\tvalidate(fields, options = {})\n\t{\n\t\tconst result = {};\n\n\t\toptions.host = options.host || this.getState().host;\n\n\t\tif (typeof fields.dialog_id !== 'undefined')\n\t\t{\n\t\t\tfields.dialogId = fields.dialog_id;\n\t\t}\n\t\tif (typeof fields.dialogId === \"number\" || typeof fields.dialogId === \"string\")\n\t\t{\n\t\t\tresult.dialogId = fields.dialogId.toString();\n\t\t}\n\n\t\tif (typeof fields.chat_id !== 'undefined')\n\t\t{\n\t\t\tfields.chatId = fields.chat_id;\n\t\t}\n\t\telse if (typeof fields.id !== 'undefined')\n\t\t{\n\t\t\tfields.chatId = fields.id;\n\t\t}\n\t\tif (typeof fields.chatId === \"number\" || typeof fields.chatId === \"string\")\n\t\t{\n\t\t\tresult.chatId = parseInt(fields.chatId);\n\t\t}\n\t\tif (typeof fields.quoteId === \"number\")\n\t\t{\n\t\t\tresult.quoteId = parseInt(fields.quoteId);\n\t\t}\n\n\t\tif (typeof fields.counter === \"number\" || typeof fields.counter === \"string\")\n\t\t{\n\t\t\tresult.counter = parseInt(fields.counter);\n\t\t}\n\n\t\tif (typeof fields.unread_id !== 'undefined')\n\t\t{\n\t\t\tfields.unreadId = fields.unread_id;\n\t\t}\n\t\tif (typeof fields.unreadId === \"number\" || typeof fields.unreadId === \"string\")\n\t\t{\n\t\t\tresult.unreadId = parseInt(fields.unreadId);\n\t\t}\n\n\t\tif (typeof fields.unread_last_id !== 'undefined')\n\t\t{\n\t\t\tfields.unreadLastId = fields.unread_last_id;\n\t\t}\n\t\tif (typeof fields.unreadLastId === \"number\" || typeof fields.unreadLastId === \"string\")\n\t\t{\n\t\t\tresult.unreadLastId = parseInt(fields.unreadLastId);\n\t\t}\n\n\t\tif (typeof fields.readed_list !== 'undefined')\n\t\t{\n\t\t\tfields.readedList = fields.readed_list;\n\t\t}\n\t\tif (typeof fields.readedList !== 'undefined')\n\t\t{\n\t\t\tresult.readedList = [];\n\n\t\t\tif (fields.readedList instanceof Array)\n\t\t\t{\n\t\t\t\tfields.readedList.forEach(element =>\n\t\t\t\t{\n\t\t\t\t\tlet record = {};\n\t\t\t\t\tif (typeof element.user_id !== 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\telement.userId = element.user_id;\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof element.user_name !== 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\telement.userName = element.user_name;\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof element.message_id !== 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\telement.messageId = element.message_id;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!element.userId || !element.userName || !element.messageId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\trecord.userId = parseInt(element.userId);\n\t\t\t\t\trecord.userName = element.userName.toString();\n\t\t\t\t\trecord.messageId = parseInt(element.messageId);\n\n\t\t\t\t\trecord.date = Utils.date.cast(element.date);\n\n\t\t\t\t\tresult.readedList.push(record);\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.writing_list !== 'undefined')\n\t\t{\n\t\t\tfields.writingList = fields.writing_list;\n\t\t}\n\t\tif (typeof fields.writingList !== 'undefined')\n\t\t{\n\t\t\tresult.writingList = [];\n\n\t\t\tif (fields.writingList instanceof Array)\n\t\t\t{\n\t\t\t\tfields.writingList.forEach(element =>\n\t\t\t\t{\n\t\t\t\t\tlet record = {};\n\n\t\t\t\t\tif (!element.userId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\trecord.userId = parseInt(element.userId);\n\t\t\t\t\trecord.userName = element.userName;\n\n\t\t\t\t\tresult.writingList.push(record);\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.manager_list !== 'undefined')\n\t\t{\n\t\t\tfields.managerList = fields.manager_list;\n\t\t}\n\t\tif (typeof fields.managerList !== 'undefined')\n\t\t{\n\t\t\tresult.managerList = [];\n\n\t\t\tif (fields.managerList instanceof Array)\n\t\t\t{\n\t\t\t\tfields.managerList.forEach(userId =>\n\t\t\t\t{\n\t\t\t\t\tuserId = parseInt(userId);\n\t\t\t\t\tif (userId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.managerList.push(userId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.mute_list !== 'undefined')\n\t\t{\n\t\t\tfields.muteList = fields.mute_list;\n\t\t}\n\t\tif (typeof fields.muteList !== 'undefined')\n\t\t{\n\t\t\tresult.muteList = [];\n\n\t\t\tif (fields.muteList instanceof Array)\n\t\t\t{\n\t\t\t\tfields.muteList.forEach(userId =>\n\t\t\t\t{\n\t\t\t\t\tuserId = parseInt(userId);\n\t\t\t\t\tif (userId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.muteList.push(userId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.textareaMessage !== 'undefined')\n\t\t{\n\t\t\tresult.textareaMessage = fields.textareaMessage.toString();\n\t\t}\n\n\t\tif (typeof fields.title !== 'undefined')\n\t\t{\n\t\t\tfields.name = fields.title;\n\t\t}\n\t\tif (typeof fields.name === \"string\" || typeof fields.name === \"number\")\n\t\t{\n\t\t\tresult.name = fields.name.toString();\n\t\t}\n\n\t\tif (typeof fields.owner !== 'undefined')\n\t\t{\n\t\t\tfields.ownerId = fields.owner;\n\t\t}\n\t\tif (typeof fields.ownerId === \"number\" || typeof fields.ownerId === \"string\")\n\t\t{\n\t\t\tresult.ownerId = parseInt(fields.ownerId);\n\t\t}\n\n\t\tif (typeof fields.extranet === \"boolean\")\n\t\t{\n\t\t\tresult.extranet = fields.extranet;\n\t\t}\n\n\t\tif (typeof fields.avatar === 'string')\n\t\t{\n\t\t\tlet avatar;\n\n\t\t\tif (!fields.avatar || fields.avatar.endsWith('/js/im/images/blank.gif'))\n\t\t\t{\n\t\t\t\tavatar = '';\n\t\t\t}\n\t\t\telse if (fields.avatar.startsWith('http'))\n\t\t\t{\n\t\t\t\tavatar = fields.avatar;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tavatar = options.host + fields.avatar;\n\t\t\t}\n\n\t\t\tif (avatar)\n\t\t\t{\n\t\t\t\tresult.avatar = encodeURI(avatar);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.color === \"string\")\n\t\t{\n\t\t\tresult.color = fields.color.toString();\n\t\t}\n\n\t\tif (typeof fields.type === \"string\")\n\t\t{\n\t\t\tresult.type = fields.type.toString();\n\t\t}\n\n\t\tif (typeof fields.entity_type !== 'undefined')\n\t\t{\n\t\t\tfields.entityType = fields.entity_type;\n\t\t}\n\t\tif (typeof fields.entityType === \"string\")\n\t\t{\n\t\t\tresult.entityType = fields.entityType.toString();\n\t\t}\n\t\tif (typeof fields.entity_id !== 'undefined')\n\t\t{\n\t\t\tfields.entityId = fields.entity_id;\n\t\t}\n\t\tif (typeof fields.entityId === \"string\" || typeof fields.entityId === \"number\")\n\t\t{\n\t\t\tresult.entityId = fields.entityId.toString();\n\t\t}\n\n\t\tif (typeof fields.entity_data_1 !== 'undefined')\n\t\t{\n\t\t\tfields.entityData1 = fields.entity_data_1;\n\t\t}\n\t\tif (typeof fields.entityData1 === \"string\")\n\t\t{\n\t\t\tresult.entityData1 = fields.entityData1.toString();\n\t\t}\n\n\t\tif (typeof fields.entity_data_2 !== 'undefined')\n\t\t{\n\t\t\tfields.entityData2 = fields.entity_data_2;\n\t\t}\n\t\tif (typeof fields.entityData2 === \"string\")\n\t\t{\n\t\t\tresult.entityData2 = fields.entityData2.toString();\n\t\t}\n\n\t\tif (typeof fields.entity_data_3 !== 'undefined')\n\t\t{\n\t\t\tfields.entityData3 = fields.entity_data_3;\n\t\t}\n\t\tif (typeof fields.entityData3 === \"string\")\n\t\t{\n\t\t\tresult.entityData3 = fields.entityData3.toString();\n\t\t}\n\n\t\tif (typeof fields.date_create !== 'undefined')\n\t\t{\n\t\t\tfields.dateCreate = fields.date_create;\n\t\t}\n\n\t\tif (typeof fields.dateCreate !== \"undefined\")\n\t\t{\n\t\t\tresult.dateCreate = Utils.date.cast(fields.dateCreate);\n\t\t}\n\n\t\tif (typeof fields.dateLastOpen !== \"undefined\")\n\t\t{\n\t\t\tresult.dateLastOpen = Utils.date.cast(fields.dateLastOpen);\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nexport {DialoguesModel};","/**\n * Bitrix Messenger\n * User model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nimport {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {Utils} from \"im.utils\";\n\nclass UsersModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'users';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\thost: this.getVariable('host', location.protocol+'//'+location.host),\n\t\t\tcollection: {}\n\t\t}\n\t}\n\n\tgetElementState(params = {})\n\t{\n\t\tlet {\n\t\t\tid = 0,\n\t\t\tname = this.getVariable('default.name', ''),\n\t\t\tfirstName = this.getVariable('default.name', ''),\n\t\t\tlastName = '',\n\t\t} = params;\n\n\t\treturn {\n\t\t\tid,\n\t\t\tname,\n\t\t\tfirstName,\n\t\t\tlastName,\n\t\t\tworkPosition: \"\",\n\t\t\tcolor: \"#048bd0\",\n\t\t\tavatar: \"\",\n\t\t\tgender: \"M\",\n\t\t\tbirthday: false,\n\t\t\textranet: false,\n\t\t\tnetwork: false,\n\t\t\tbot: false,\n\t\t\tconnector: false,\n\t\t\texternalAuthId: \"default\",\n\t\t\tstatus: \"online\",\n\t\t\tidle: false,\n\t\t\tlastActivityDate: false,\n\t\t\tmobileLastDate: false,\n\t\t\tabsent: false,\n\t\t\tdepartments: [],\n\t\t\tphones: {\n\t\t\t\tworkPhone: \"\",\n\t\t\t\tpersonalMobile: \"\",\n\t\t\t\tpersonalPhone: \"\",\n\t\t\t\tinnerPhone: \"\",\n\t\t\t},\n\t\t\tinit: false\n\t\t};\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tget: state => (userId, getTemporary = false) =>\n\t\t\t{\n\t\t\t\tuserId = parseInt(userId);\n\n\t\t\t\tif (userId <= 0)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t!getTemporary\n\t\t\t\t\t&& (!state.collection[userId] || !state.collection[userId].init)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif (!state.collection[userId])\n\t\t\t\t{\n\t\t\t\t\treturn this.getElementState({id: userId});\n\t\t\t\t}\n\n\t\t\t\treturn state.collection[userId];\n\t\t\t},\n\t\t\tgetBlank: state => params =>\n\t\t\t{\n\t\t\t\treturn this.getElementState(params);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(user => {\n\t\t\t\t\t\treturn Object.assign(\n\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\tthis.getElementState(),\n\t\t\t\t\t\t\tthis.validate(Object.assign({}, user), {host: store.state.host}),\n\t\t\t\t\t\t\t{init: true}\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = [];\n\t\t\t\t\tresult.push(Object.assign(\n\t\t\t\t\t\t{},\n\t\t\t\t\t\tthis.getElementState(),\n\t\t\t\t\t\tthis.validate(Object.assign({}, payload), {host: store.state.host}),\n\t\t\t\t\t\t{init: true}\n\t\t\t\t\t));\n\t\t\t\t\tpayload = result;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', payload);\n\t\t\t},\n\t\t\tupdate: (store, payload) =>\n\t\t\t{\n\t\t\t\tpayload.id = parseInt(payload.id);\n\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.id] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.id].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tid : payload.id,\n\t\t\t\t\tfields : this.validate(Object.assign({}, payload.fields), {host: store.state.host})\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tdelete: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('delete', payload.id);\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tsaveState: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('saveState', {});\n\t\t\t\treturn true;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tset: (state, payload) =>\n\t\t\t{\n\t\t\t\tfor (let element of payload)\n\t\t\t\t{\n\t\t\t\t\tthis.initCollection(state, {id: element.id});\n\n\t\t\t\t\tstate.collection[element.id] = element;\n\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdate: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\n\t\t\t\tstate.collection[payload.id] = Object.assign(\n\t\t\t\t\tstate.collection[payload.id],\n\t\t\t\t\tpayload.fields\n\t\t\t\t);\n\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tdelete: (state, payload) =>\n\t\t\t{\n\t\t\t\tdelete state.collection[payload.id];\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tsaveState: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t}\n\t}\n\n\tinitCollection(state, payload)\n\t{\n\t\tif (typeof state.collection[payload.id] !== 'undefined')\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tVue.set(state.collection, payload.id, this.getElementState());\n\n\t\treturn true;\n\t}\n\n\tgetSaveUserList()\n\t{\n\t\tif (!this.db)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tif (!this.store.getters['messages/getSaveUserList'])\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tlet list = this.store.getters['messages/getSaveUserList']();\n\t\tif (!list)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\treturn list;\n\t}\n\n\tgetSaveTimeout()\n\t{\n\t\treturn 250;\n\t}\n\n\tsaveState(state)\n\t{\n\t\tif (!this.isSaveAvailable())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tsuper.saveState(() =>\n\t\t{\n\t\t\tlet list = this.getSaveUserList();\n\t\t\tif (!list)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet storedState = {\n\t\t\t\tcollection: {},\n\t\t\t};\n\n\t\t\tlet exceptionList = {\n\t\t\t\tabsent: true,\n\t\t\t\tidle: true,\n\t\t\t\tmobileLastDate: true,\n\t\t\t\tlastActivityDate: true,\n\t\t\t};\n\n\t\t\tfor (let chatId in list)\n\t\t\t{\n\t\t\t\tif (!list.hasOwnProperty(chatId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlist[chatId].forEach(userId =>\n\t\t\t\t{\n\t\t\t\t\tif (!state.collection[userId])\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tstoredState.collection[userId] = this.cloneState(state.collection[userId], exceptionList);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn storedState;\n\t\t});\n\t}\n\n\tvalidate(fields, options = {})\n\t{\n\t\tconst result = {};\n\n\t\toptions.host = options.host || this.getState().host;\n\n\t\tif (typeof fields.id === \"number\" || typeof fields.id === \"string\")\n\t\t{\n\t\t\tresult.id = parseInt(fields.id);\n\t\t}\n\n\t\tif (typeof fields.first_name !== \"undefined\")\n\t\t{\n\t\t\tfields.firstName = fields.first_name;\n\t\t}\n\t\tif (typeof fields.last_name !== \"undefined\")\n\t\t{\n\t\t\tfields.lastName = fields.last_name;\n\t\t}\n\t\tif (typeof fields.name === \"string\" || typeof fields.name === \"number\")\n\t\t{\n\t\t\tresult.name = fields.name.toString();\n\n\t\t\tif (typeof fields.firstName !== \"undefined\" && !fields.firstName)\n\t\t\t{\n\t\t\t\tlet elementsOfName = fields.name.split(' ');\n\t\t\t\tif (elementsOfName.length > 1)\n\t\t\t\t{\n\t\t\t\t\tdelete elementsOfName[elementsOfName.length-1];\n\t\t\t\t\tfields.firstName = elementsOfName.join(' ').trim();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfields.firstName = result.name;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (typeof fields.lastName !== \"undefined\" && !fields.lastName)\n\t\t\t{\n\t\t\t\tlet elementsOfName = fields.name.split(' ');\n\t\t\t\tif (elementsOfName.length > 1)\n\t\t\t\t{\n\t\t\t\t\tfields.lastName = elementsOfName[elementsOfName.length-1];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfields.lastName = '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.firstName === \"string\" || typeof fields.name === \"number\")\n\t\t{\n\t\t\tresult.firstName = fields.firstName.toString();\n\t\t}\n\t\tif (typeof fields.lastName === \"string\" || typeof fields.name === \"number\")\n\t\t{\n\t\t\tresult.lastName = fields.lastName.toString();\n\t\t}\n\n\t\tif (typeof fields.work_position !== \"undefined\")\n\t\t{\n\t\t\tfields.workPosition = fields.work_position;\n\t\t}\n\t\tif (typeof fields.workPosition === \"string\" || typeof fields.workPosition === \"number\")\n\t\t{\n\t\t\tresult.workPosition = fields.workPosition.toString();\n\t\t}\n\n\t\tif (typeof fields.color === \"string\")\n\t\t{\n\t\t\tresult.color = fields.color;\n\t\t}\n\n\t\tif (typeof fields.avatar === 'string')\n\t\t{\n\t\t\tlet avatar;\n\n\t\t\tif (!fields.avatar || fields.avatar.endsWith('/js/im/images/blank.gif'))\n\t\t\t{\n\t\t\t\tavatar = '';\n\t\t\t}\n\t\t\telse if (fields.avatar.startsWith('http'))\n\t\t\t{\n\t\t\t\tavatar = fields.avatar;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tavatar = options.host + fields.avatar;\n\t\t\t}\n\n\t\t\tif (avatar)\n\t\t\t{\n\t\t\t\tresult.avatar = encodeURI(avatar);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.gender !== 'undefined')\n\t\t{\n\t\t\tresult.gender = fields.gender === 'F'? 'F': 'M';\n\t\t}\n\n\t\tif (typeof fields.birthday === \"string\")\n\t\t{\n\t\t\tresult.birthday = fields.birthday;\n\t\t}\n\n\t\tif (typeof fields.extranet === \"boolean\")\n\t\t{\n\t\t\tresult.extranet = fields.extranet;\n\t\t}\n\n\t\tif (typeof fields.network === \"boolean\")\n\t\t{\n\t\t\tresult.network = fields.network;\n\t\t}\n\n\t\tif (typeof fields.bot === \"boolean\")\n\t\t{\n\t\t\tresult.bot = fields.bot;\n\t\t}\n\n\t\tif (typeof fields.connector === \"boolean\")\n\t\t{\n\t\t\tresult.connector = fields.connector;\n\t\t}\n\n\t\tif (typeof fields.external_auth_id !== \"undefined\")\n\t\t{\n\t\t\tfields.externalAuthId = fields.external_auth_id;\n\t\t}\n\t\tif (typeof fields.externalAuthId === \"string\" && fields.externalAuthId)\n\t\t{\n\t\t\tresult.externalAuthId = fields.externalAuthId;\n\t\t}\n\n\t\tif (typeof fields.status === \"string\")\n\t\t{\n\t\t\tresult.status = fields.status;\n\t\t}\n\n\t\tif (typeof fields.idle !== \"undefined\")\n\t\t{\n\t\t\tresult.idle = Utils.date.cast(fields.idle, false);\n\t\t}\n\t\tif (typeof fields.last_activity_date !== \"undefined\")\n\t\t{\n\t\t\tfields.lastActivityDate = fields.last_activity_date;\n\t\t}\n\t\tif (typeof fields.lastActivityDate !== \"undefined\")\n\t\t{\n\t\t\tresult.lastActivityDate = Utils.date.cast(fields.lastActivityDate, false);\n\t\t}\n\t\tif (typeof fields.mobile_last_date !== \"undefined\")\n\t\t{\n\t\t\tfields.mobileLastDate = fields.mobile_last_date;\n\t\t}\n\t\tif (typeof fields.mobileLastDate !== \"undefined\")\n\t\t{\n\t\t\tresult.mobileLastDate = Utils.date.cast(fields.mobileLastDate, false);\n\t\t}\n\n\t\tif (typeof fields.absent !== \"undefined\")\n\t\t{\n\t\t\tresult.absent = Utils.date.cast(fields.absent, false);\n\t\t}\n\n\t\tif (typeof fields.departments !== 'undefined')\n\t\t{\n\t\t\tresult.departments = [];\n\n\t\t\tif (fields.departments instanceof Array)\n\t\t\t{\n\t\t\t\tfields.departments.forEach(departmentId =>\n\t\t\t\t{\n\t\t\t\t\tdepartmentId = parseInt(departmentId);\n\t\t\t\t\tif (departmentId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.departments.push(departmentId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.phones === 'object' && fields.phones)\n\t\t{\n\t\t\tresult.phones = {};\n\n\t\t\tif (typeof fields.phones.work_phone !== \"undefined\")\n\t\t\t{\n\t\t\t\tfields.phones.workPhone = fields.phones.work_phone;\n\t\t\t}\n\t\t\tif (typeof fields.phones.workPhone === 'string' || typeof fields.phones.workPhone === 'number')\n\t\t\t{\n\t\t\t\tresult.phones.workPhone = fields.phones.workPhone.toString();\n\t\t\t}\n\n\t\t\tif (typeof fields.phones.personal_mobile !== \"undefined\")\n\t\t\t{\n\t\t\t\tfields.phones.personalMobile = fields.phones.personal_mobile;\n\t\t\t}\n\t\t\tif (typeof fields.phones.personalMobile === 'string' || typeof fields.phones.personalMobile === 'number')\n\t\t\t{\n\t\t\t\tresult.phones.personalMobile = fields.phones.personalMobile.toString();\n\t\t\t}\n\n\t\t\tif (typeof fields.phones.personal_phone !== \"undefined\")\n\t\t\t{\n\t\t\t\tfields.phones.personalPhone = fields.phones.personal_phone;\n\t\t\t}\n\t\t\tif (typeof fields.phones.personalPhone === 'string' || typeof fields.phones.personalPhone === 'number')\n\t\t\t{\n\t\t\t\tresult.phones.personalPhone = fields.phones.personalPhone.toString();\n\t\t\t}\n\n\t\t\tif (typeof fields.phones.inner_phone !== \"undefined\")\n\t\t\t{\n\t\t\t\tfields.phones.innerPhone = fields.phones.inner_phone;\n\t\t\t}\n\t\t\tif (typeof fields.phones.innerPhone === 'string' || typeof fields.phones.innerPhone === 'number')\n\t\t\t{\n\t\t\t\tresult.phones.innerPhone = fields.phones.innerPhone.toString();\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nexport {UsersModel};","/**\n * Bitrix Messenger\n * File model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\n\nimport {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {FileStatus, FileType, MutationType} from 'im.const';\nimport {Utils} from \"im.utils\";\n\nclass FilesModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'files';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcreated: 0,\n\t\t\thost: this.getVariable('host', location.protocol+'//'+location.host),\n\t\t\tcollection: {},\n\t\t\tindex: {},\n\t\t}\n\t}\n\n\tgetElementState(params = {})\n\t{\n\t\tlet {\n\t\t\tid = 0,\n\t\t\tchatId = 0,\n\t\t\tname = this.getVariable('default.name', ''),\n\t\t} = params;\n\n\t\treturn {\n\t\t\tid,\n\t\t\tchatId,\n\t\t\tname,\n\t\t\ttemplateId: id,\n\t\t\tdate: new Date(),\n\t\t\ttype: 'file',\n\t\t\textension: \"\",\n\t\t\ticon: \"empty\",\n\t\t\tsize: 0,\n\t\t\timage: false,\n\t\t\tstatus: FileStatus.done,\n\t\t\tprogress: 100,\n\t\t\tauthorId: 0,\n\t\t\tauthorName: \"\",\n\t\t\turlPreview: \"\",\n\t\t\turlShow: \"\",\n\t\t\turlDownload: \"\",\n\t\t\tinit: false\n\t\t};\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tget: state => (chatId, fileId, getTemporary = false) =>\n\t\t\t{\n\t\t\t\tif (!chatId || !fileId)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif (!state.index[chatId] || !state.index[chatId][fileId])\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif (!getTemporary && !state.index[chatId][fileId].init)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn state.index[chatId][fileId];\n\t\t\t},\n\t\t\tgetList: state => chatId =>\n\t\t\t{\n\t\t\t\tif (!state.index[chatId])\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn state.index[chatId];\n\t\t\t},\n\t\t\tgetBlank: state => params =>\n\t\t\t{\n\t\t\t\treturn this.getElementState(params);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tadd: (store, payload) =>\n\t\t\t{\n\t\t\t\tlet result = this.validate(Object.assign({}, payload), {host: store.state.host});\n\t\t\t\tresult.id = 'temporary' + (new Date).getTime() + store.state.created;\n\t\t\t\tresult.templateId = result.id;\n\t\t\t\tresult.init = true;\n\n\t\t\t\tstore.commit('add', Object.assign({}, this.getElementState(), result));\n\n\t\t\t\treturn result.id;\n\t\t\t},\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(file => {\n\t\t\t\t\t\tlet result = this.validate(Object.assign({}, file), {host: store.state.host});\n\t\t\t\t\t\tresult.templateId = result.id;\n\t\t\t\t\t\treturn Object.assign({}, this.getElementState(), result, {init: true});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = this.validate(Object.assign({}, payload), {host: store.state.host});\n\t\t\t\t\tresult.templateId = result.id;\n\t\t\t\t\tpayload = [];\n\t\t\t\t\tpayload.push(\n\t\t\t\t\t\tObject.assign({}, this.getElementState(), result, {init: true})\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', {\n\t\t\t\t\tinsertType : MutationType.setAfter,\n\t\t\t\t\tdata : payload\n\t\t\t\t});\n\t\t\t},\n\t\t\tsetBefore: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(file => {\n\t\t\t\t\t\tlet result = this.validate(Object.assign({}, file), {host: store.state.host});\n\t\t\t\t\t\tresult.templateId = result.id;\n\t\t\t\t\t\treturn Object.assign({}, this.getElementState(), result, {init: true});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = this.validate(Object.assign({}, payload), {host: store.state.host});\n\t\t\t\t\tresult.templateId = result.id;\n\t\t\t\t\tpayload = [];\n\t\t\t\t\tpayload.push(\n\t\t\t\t\t\tObject.assign({}, this.getElementState(), result, {init: true})\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', {\n\t\t\t\t\tactionName: 'setBefore',\n\t\t\t\t\tinsertType : MutationType.setBefore,\n\t\t\t\t\tdata : payload\n\t\t\t\t});\n\t\t\t},\n\t\t\tupdate: (store, payload) =>\n\t\t\t{\n\t\t\t\tlet result = this.validate(Object.assign({}, payload.fields), {host: store.state.host});\n\n\t\t\t\tstore.commit('initCollection', {chatId: payload.chatId});\n\n\t\t\t\tlet index = store.state.collection[payload.chatId].findIndex(el => el.id === payload.id);\n\t\t\t\tif (index < 0)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tid : payload.id,\n\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\tindex : index,\n\t\t\t\t\tfields : result\n\t\t\t\t});\n\n\t\t\t\tif (payload.fields.blink)\n\t\t\t\t{\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\t\tid : payload.id ,\n\t\t\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\t\t\tfields : {blink: false}\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 1000);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tdelete: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('delete', {\n\t\t\t\t\tid : payload.id,\n\t\t\t\t\tchatId : payload.chatId\n\t\t\t\t});\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tsaveState: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('saveState', {});\n\t\t\t\treturn true;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tinitCollection: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\t\t\t},\n\t\t\tadd: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\n\t\t\t\tstate.collection[payload.chatId].push(payload);\n\t\t\t\tstate.index[payload.chatId][payload.id] = payload;\n\n\t\t\t\tstate.created += 1;\n\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tset: (state, payload) =>\n\t\t\t{\n\t\t\t\tfor (let element of payload.data)\n\t\t\t\t{\n\t\t\t\t\tthis.initCollection(state, {chatId: element.chatId});\n\n\t\t\t\t\tlet index = state.collection[element.chatId].findIndex(el => el.id === element.id);\n\t\t\t\t\tif (index > -1)\n\t\t\t\t\t{\n\t\t\t\t\t\tdelete element.templateId;\n\t\t\t\t\t\tstate.collection[element.chatId][index] = Object.assign(state.collection[element.chatId][index], element);\n\t\t\t\t\t}\n\t\t\t\t\telse if (payload.insertType === MutationType.setBefore)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[element.chatId].unshift(element);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[element.chatId].push(element);\n\t\t\t\t\t}\n\n\t\t\t\t\tstate.index[element.chatId][element.id] = element;\n\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdate: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\n\t\t\t\tlet index = -1;\n\t\t\t\tif (typeof payload.index !== 'undefined' && state.collection[payload.chatId][payload.index])\n\t\t\t\t{\n\t\t\t\t\tindex = payload.index;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tindex = state.collection[payload.chatId].findIndex(el => el.id === payload.id);\n\t\t\t\t}\n\n\t\t\t\tif (index >= 0)\n\t\t\t\t{\n\t\t\t\t\tdelete payload.fields.templateId;\n\t\t\t\t\tlet element = Object.assign(\n\t\t\t\t\t\tstate.collection[payload.chatId][index],\n\t\t\t\t\t\tpayload.fields\n\t\t\t\t\t);\n\t\t\t\t\tstate.collection[payload.chatId][index] = element;\n\t\t\t\t\tstate.index[payload.chatId][element.id] = element;\n\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelete: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\n\t\t\t\tstate.collection[payload.chatId] = state.collection[payload.chatId].filter(element => element.id !== payload.id);\n\t\t\t\tdelete state.index[payload.chatId][payload.id];\n\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tsaveState: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t}\n\t}\n\n\tinitCollection(state, payload)\n\t{\n\t\tif (typeof state.collection[payload.chatId] !== 'undefined')\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tVue.set(state.collection, payload.chatId, []);\n\t\tVue.set(state.index, payload.chatId, {});\n\n\t\treturn true;\n\t}\n\n\tgetLoadedState(state)\n\t{\n\t\tif (!state || typeof state !== 'object')\n\t\t{\n\t\t\treturn state;\n\t\t}\n\n\t\tif (typeof state.collection !== 'object')\n\t\t{\n\t\t\treturn state;\n\t\t}\n\n\t\tstate.index = {};\n\n\t\tfor (let chatId in state.collection)\n\t\t{\n\t\t\tif (!state.collection.hasOwnProperty(chatId))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tstate.index[chatId] = {};\n\n\t\t\tstate.collection[chatId].forEach(file => {\n\t\t\t\tstate.index[chatId][file.id] = file;\n\t\t\t});\n\t\t}\n\n\t\treturn state;\n\t}\n\n\tgetSaveFileList()\n\t{\n\t\tif (!this.db)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tif (!this.store.getters['messages/getSaveFileList'])\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tlet list = this.store.getters['messages/getSaveFileList']();\n\t\tif (!list)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\treturn list;\n\t}\n\n\tgetSaveTimeout()\n\t{\n\t\treturn 250;\n\t}\n\n\tsaveState(state)\n\t{\n\t\tif (!this.isSaveAvailable())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tsuper.saveState(() =>\n\t\t{\n\t\t\tlet list = this.getSaveFileList();\n\t\t\tif (!list)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet storedState = {\n\t\t\t\tcollection: {},\n\t\t\t};\n\n\t\t\tfor (let chatId in list)\n\t\t\t{\n\t\t\t\tif (!list.hasOwnProperty(chatId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlist[chatId].forEach(fileId =>\n\t\t\t\t{\n\t\t\t\t\tif (!state.index[chatId])\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!storedState.collection[chatId])\n\t\t\t\t\t{\n\t\t\t\t\t\tstoredState.collection[chatId] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tstoredState.collection[chatId].push(\n\t\t\t\t\t\tstate.index[chatId][fileId]\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn storedState;\n\t\t});\n\t}\n\n\tvalidate(fields, options = {})\n\t{\n\t\tconst result = {};\n\n\t\toptions.host = options.host || this.getState().host;\n\n\t\tif (typeof fields.id === \"number\")\n\t\t{\n\t\t\tresult.id = fields.id;\n\t\t}\n\t\telse if (typeof fields.id === \"string\")\n\t\t{\n\t\t\tif (fields.id.startsWith('temporary'))\n\t\t\t{\n\t\t\t\tresult.id = fields.id;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.id = parseInt(fields.id);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.templateId === \"number\")\n\t\t{\n\t\t\tresult.templateId = fields.templateId;\n\t\t}\n\t\telse if (typeof fields.templateId === \"string\")\n\t\t{\n\t\t\tif (fields.templateId.startsWith('temporary'))\n\t\t\t{\n\t\t\t\tresult.templateId = fields.templateId;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.templateId = parseInt(fields.templateId);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.chatId === \"number\" || typeof fields.chatId === \"string\")\n\t\t{\n\t\t\tresult.chatId = parseInt(fields.chatId);\n\t\t}\n\n\t\tif (typeof fields.date !== \"undefined\")\n\t\t{\n\t\t\tresult.date = Utils.date.cast(fields.date);\n\t\t}\n\n\t\tif (typeof fields.type === \"string\")\n\t\t{\n\t\t\tresult.type = fields.type;\n\t\t}\n\n\t\tif (typeof fields.extension === \"string\")\n\t\t{\n\t\t\tresult.extension = fields.extension.toString();\n\n\t\t\tif (result.type === 'image')\n\t\t\t{\n\t\t\t\tresult.icon = 'img';\n\t\t\t}\n\t\t\telse if (result.type === 'video')\n\t\t\t{\n\t\t\t\tresult.icon = 'mov';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.icon = FilesModel.getIconType(result.extension);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.name === \"string\" || typeof fields.name === \"number\")\n\t\t{\n\t\t\tresult.name = fields.name.toString();\n\t\t}\n\n\n\t\tif (typeof fields.size === \"number\" || typeof fields.size === \"string\")\n\t\t{\n\t\t\tresult.size = parseInt(fields.size);\n\t\t}\n\n\t\tif (typeof fields.image === 'boolean')\n\t\t{\n\t\t\tresult.image = false;\n\t\t}\n\t\telse if (typeof fields.image === 'object' && fields.image)\n\t\t{\n\t\t\tresult.image = {\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0,\n\t\t\t};\n\n\t\t\tif (typeof fields.image.width === \"string\" || typeof fields.image.width === \"number\")\n\t\t\t{\n\t\t\t\tresult.image.width = parseInt(fields.image.width);\n\t\t\t}\n\t\t\tif (typeof fields.image.height === \"string\" || typeof fields.image.height === \"number\")\n\t\t\t{\n\t\t\t\tresult.image.height = parseInt(fields.image.height);\n\t\t\t}\n\n\t\t\tif (result.image.width <= 0 || result.image.height <= 0)\n\t\t\t{\n\t\t\t\tresult.image = false;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.status === \"string\" && typeof FileStatus[fields.status] !== 'undefined')\n\t\t{\n\t\t\tresult.status = fields.status;\n\t\t}\n\n\t\tif (typeof fields.progress === \"number\" || typeof fields.progress === \"string\")\n\t\t{\n\t\t\tresult.progress = parseInt(fields.progress);\n\t\t}\n\n\t\tif (typeof fields.authorId === \"number\" || typeof fields.authorId === \"string\")\n\t\t{\n\t\t\tresult.authorId = parseInt(fields.authorId);\n\t\t}\n\n\t\tif (typeof fields.authorName === \"string\" || typeof fields.authorName === \"number\")\n\t\t{\n\t\t\tresult.authorName = fields.authorName.toString();\n\t\t}\n\n\t\tif (typeof fields.urlPreview === 'string')\n\t\t{\n\t\t\tif (\n\t\t\t\t!fields.urlPreview\n\t\t\t\t|| fields.urlPreview.startsWith('http')\n\t\t\t\t|| fields.urlPreview.startsWith('bx')\n\t\t\t\t|| fields.urlPreview.startsWith('file')\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult.urlPreview = fields.urlPreview;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.urlPreview = options.host+fields.urlPreview;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.urlDownload === 'string')\n\t\t{\n\t\t\tif (\n\t\t\t\t!fields.urlDownload\n\t\t\t\t|| fields.urlDownload.startsWith('http')\n\t\t\t\t|| fields.urlDownload.startsWith('bx')\n\t\t\t\t|| fields.urlPreview.startsWith('file')\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult.urlDownload = fields.urlDownload;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.urlDownload = options.host+fields.urlDownload;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.urlShow === 'string')\n\t\t{\n\t\t\tif (\n\t\t\t\t!fields.urlShow\n\t\t\t\t|| fields.urlShow.startsWith('http')\n\t\t\t\t|| fields.urlShow.startsWith('bx')\n\t\t\t\t|| fields.urlShow.startsWith('file')\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult.urlShow = fields.urlShow;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.urlShow = options.host+fields.urlShow;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tstatic getType(type)\n\t{\n\t\ttype = type.toString().toLowerCase().split('.').splice(-1)[0];\n\n\t\tswitch(type)\n\t\t{\n\t\t\tcase 'png':\n\t\t\tcase 'jpe':\n\t\t\tcase 'jpg':\n\t\t\tcase 'jpeg':\n\t\t\tcase 'gif':\n\t\t\tcase 'heic':\n\t\t\tcase 'bmp':\n\t\t\t\treturn FileType.image;\n\n\t\t\tcase 'mp4':\n\t\t\tcase 'mkv':\n\t\t\tcase 'webm':\n\t\t\tcase 'mpeg':\n\t\t\tcase 'hevc':\n\t\t\tcase 'avi':\n\t\t\tcase '3gp':\n\t\t\tcase 'flv':\n\t\t\tcase 'm4v':\n\t\t\tcase 'ogg':\n\t\t\tcase 'wmv':\n\t\t\tcase 'mov':\n\t\t\t\treturn FileType.video;\n\n\t\t\tcase 'mp3':\n\t\t\t\treturn FileType.audio;\n\t\t}\n\n\t\treturn FileType.file\n\t}\n\n\tstatic getIconType(extension)\n\t{\n\t\tlet icon = 'empty';\n\n\t\tswitch(extension.toString())\n\t\t{\n\t\t\tcase 'png':\n\t\t\tcase 'jpe':\n\t\t\tcase 'jpg':\n\t\t\tcase 'jpeg':\n\t\t\tcase 'gif':\n\t\t\tcase 'heic':\n\t\t\tcase 'bmp':\n\t\t\t\ticon = 'img';\n\t\t\t\tbreak;\n\n\t\t\tcase 'mp4':\n\t\t\tcase 'mkv':\n\t\t\tcase 'webm':\n\t\t\tcase 'mpeg':\n\t\t\tcase 'hevc':\n\t\t\tcase 'avi':\n\t\t\tcase '3gp':\n\t\t\tcase 'flv':\n\t\t\tcase 'm4v':\n\t\t\tcase 'ogg':\n\t\t\tcase 'wmv':\n\t\t\tcase 'mov':\n\t\t\t\ticon = 'mov';\n\t\t\t\tbreak;\n\n\t\t\tcase 'txt':\n\t\t\t\ticon = 'txt';\n\t\t\t\tbreak;\n\n\t\t\tcase 'doc':\n\t\t\tcase 'docx':\n\t\t\t\ticon = 'doc';\n\t\t\t\tbreak;\n\n\t\t\tcase 'xls':\n\t\t\tcase 'xlsx':\n\t\t\t\ticon = 'xls';\n\t\t\t\tbreak;\n\n\t\t\tcase 'php':\n\t\t\t\ticon = 'php';\n\t\t\t\tbreak;\n\n\t\t\tcase 'pdf':\n\t\t\t\ticon = 'pdf';\n\t\t\t\tbreak;\n\n\t\t\tcase 'ppt':\n\t\t\tcase 'pptx':\n\t\t\t\ticon = 'ppt';\n\t\t\t\tbreak;\n\n\t\t\tcase 'rar':\n\t\t\t\ticon = 'rar';\n\t\t\t\tbreak;\n\n\t\t\tcase 'zip':\n\t\t\tcase '7z':\n\t\t\tcase 'tar':\n\t\t\tcase 'gz':\n\t\t\tcase 'gzip':\n\t\t\t\ticon = 'zip';\n\t\t\t\tbreak;\n\n\t\t\tcase 'set':\n\t\t\t\ticon = 'set';\n\t\t\t\tbreak;\n\n\t\t\tcase 'conf':\n\t\t\tcase 'ini':\n\t\t\tcase 'plist':\n\t\t\t\ticon = 'set';\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn icon;\n\t}\n}\n\nexport {FilesModel};"],"names":["ApplicationModel","common","host","getVariable","location","protocol","siteId","userId","languageId","dialog","dialogId","chatId","diskFolderId","messageLimit","messageExtraCount","disk","enabled","maxFileSize","mobile","keyboardShow","device","type","DeviceType","desktop","orientation","DeviceOrientation","portrait","options","autoplayVideo","darkBackground","error","active","code","description","Object","assign","set","store","payload","commit","validate","state","hasChange","group","hasOwnProperty","field","isSaveNeeded","saveState","increaseDialogExtraCount","count","decreaseDialogExtraCount","newCounter","clearDialogExtraCount","fields","result","toString","startsWith","substr","parseInt","isNaN","VuexBuilderModel","IntersectionType","empty","equal","none","found","foundReverse","MessagesModel","created","collection","mutationType","saveMessageList","saveFileList","saveUserList","templateId","templateType","id","authorId","date","Date","text","textConverted","params","TYPE","COMPONENT_ID","unread","sending","retry","blink","getMutationType","initialType","MutationType","appliedType","getLastId","length","index","element","getMessage","messageId","get","getBlank","getElementState","getSaveFileList","getSaveUserList","add","getTime","dispatch","actionStart","test","Vue","nextTick","actionError","actionFinish","Array","map","message","prepareMessage","push","insertType","data","setAfter","setBefore","update","findIndex","el","setTimeout","delete","elements","clear","applyMutationType","readMessages","readId","unreadMessages","unreadId","initCollection","setMutationType","chats","chatsSave","forEach","StorageLimit","messages","filter","includes","intersection","manageCacheBeforeSet","reverse","foundElements","removeIntersectionCacheElements","clearTimeout","removeIntersectionCacheTimeout","noneElements","scrollStickToTop","scrollMessageId","unshift","getters","Set","lastElementId","needApplySort","i","sort","a","b","isSaveState","applied","saveNeeded","updateSubordinateStates","concat","cache","recursive","reverseResult","isSaveAvailable","slice","FILE_ID","updateSaveLists","storedState","chat_id","Utils","cast","textOriginal","convertToHtml","isConverted","text_converted","senderId","author_id","system","validateParams","BX","isComponent","like","e","hasResultElements","quote","image","highlightText","enableBigSmile","trim","replace","quoteSign","indexOf","textPrepare","split","textPrepareFlag","join","decodeBbCode","whole","p1","p2","p3","p4","offset","changed","aInner","match","RegExp","doubleSmileSize","start","width","middle","height","end","textOnly","codeReplacement","openlines","number","htmlspecialchars","historyId","command","html","textElementSize","url","attrs","size","title","attributes","name","parentNode","innerHTML","src","DialoguesModel","saveDialogList","saveChatList","writingList","quoteId","counter","unreadLastId","managerList","readedList","textareaMessage","init","owner","extranet","avatar","color","entityType","entityId","entityData1","entityData2","entityData3","dateCreate","getByChatId","getQuoteId","canSaveChat","canSaveDialog","isPrivateDialog","updateWriting","action","userName","actionName","updateReaded","increaseCounter","increasedCounter","decreaseCounter","decreasedCounter","saveDialog","dialogues","cloneState","getElementStateSaveException","getState","dialog_id","unread_id","unread_last_id","readed_list","record","user_id","user_name","message_id","writing_list","manager_list","mute_list","muteList","ownerId","endsWith","encodeURI","entity_type","entity_id","entity_data_1","entity_data_2","entity_data_3","date_create","dateLastOpen","UsersModel","firstName","lastName","workPosition","gender","birthday","network","bot","connector","externalAuthId","status","idle","lastActivityDate","mobileLastDate","absent","departments","phones","workPhone","personalMobile","personalPhone","innerPhone","getTemporary","user","db","list","exceptionList","first_name","last_name","elementsOfName","work_position","external_auth_id","last_activity_date","mobile_last_date","departmentId","work_phone","personal_mobile","personal_phone","inner_phone","FilesModel","extension","icon","FileStatus","done","progress","authorName","urlPreview","urlShow","urlDownload","fileId","getList","file","getIconType","toLowerCase","splice","FileType","video","audio"],"mappings":"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"}